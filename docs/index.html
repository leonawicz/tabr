<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music Notation Syntax, Manipulation, Analysis and Transcription in R • tabr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Music Notation Syntax, Manipulation, Analysis and Transcription in R">
<meta property="og:description" content='Provides a music notation syntax and a collection of music programming functions for generating, manipulating, organizing and analyzing musical information in R. 
    The music notation framework facilitates creating and analyzing music data in notation form.
    Music data can be viewed, manipulated and analyzed while in different forms of representation based around different data structures: strings and data frames.
    Each representation offers advantages over the other for different use cases.
    Music syntax can be entered directly and represented in character strings to minimize the formatting overhead of data entry by using simple data structures, for example when wanting to quickly enter and transcribe short pieces of music to sheet music or tablature.
    The package contains functions for directly performing various mathematical, logical and organizational operations and musical transformations on special object classes that facilitate working with music data and notation.
    The same music data can also be organized in tidy data frames, allowing for a more familiar and powerful approach to the analysis of large amounts of structured music data.
    Functions are available for mapping seamlessly between these data structures and their representations of musical information.
    The package also provides API wrapper functions for transcribing musical representations in R into guitar tablature ("tabs") and basic sheet music using the LilyPond backend (&lt;http://lilypond.org&gt;).
    LilyPond is open source music engraving software for generating high quality sheet music based on markup syntax. 
    The package generates LilyPond files from R code and can pass them to LilyPond to be rendered into sheet music pdf files.
    The package offers nominal MIDI file output support in conjunction with rendering sheet music. 
    The package can read MIDI files and attempts to structure the MIDI data to integrate as best as possible with the data structures and functionality found throughout the package.'>
<meta property="og:image" content="http://leonawicz.github.io/tabr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-46129458-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-46129458-3');
</script>
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.9.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-info-circle"></span>
     
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Programming</li>
    <li>
      <a href="articles/tabr-prog-nw.html">Noteworthiness</a>
    </li>
    <li>
      <a href="articles/tabr-prog-scales.html">Musical scales</a>
    </li>
    <li>
      <a href="articles/tabr-prog-notes.html">Note functions</a>
    </li>
    <li>
      <a href="articles/tabr-prog-chords.html">Chord functions</a>
    </li>
    <li>
      <a href="articles/tabr-prog-converters.html">Syntax converters</a>
    </li>
    <li>
      <a href="articles/tabr-fretboard.html">Fretboard diagram plots</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Transcription</li>
    <li>
      <a href="articles/tabr-basics.html">Basic overview</a>
    </li>
    <li>
      <a href="articles/tabr-phrases.html">Musical phrases</a>
    </li>
    <li>
      <a href="articles/tabr-helpers.html">Phrase helpers</a>
    </li>
    <li>
      <a href="articles/tabr-chords.html">Chords</a>
    </li>
    <li>
      <a href="articles/tabr-repeats.html">Repeats</a>
    </li>
    <li>
      <a href="articles/tabr-tracks-scores.html">Tracks and scores</a>
    </li>
    <li>
      <a href="articles/tabr-engraving.html">Render scores</a>
    </li>
    <li>
      <a href="articles/tabr-chordchart.html">Render chord chart</a>
    </li>
    <li>
      <a href="articles/tabr-tunings.html">Strings and tunings</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/tabr-ex1.html">Tuning and capo</a>
    </li>
    <li>
      <a href="articles/tabr-ex2.html">Multiple voices</a>
    </li>
    <li>
      <a href="articles/tabr-ex3.html">AC2 - Ezio's family</a>
    </li>
    <li>
      <a href="articles/tabr-ex4.html">Gin Wigmore - Devil in me</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-book"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leonawicz/tabr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="tabr-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#tabr-" class="anchor"></a>tabr <img src="reference/figures/logo.png" style="margin-left:10px;margin-bottom:5px;" width="120" align="right">
</h1></div>
<p><strong>Author:</strong> <a href="https://leonawicz.github.io/blog/">Matthew Leonawicz</a> <a href="https://orcid.org/0000-0001-9452-2771" target="orcid.widget"> <image class="orcid" src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" height="16"></image></a> <br><strong>License:</strong> <a href="https://opensource.org/licenses/MIT">MIT</a><br></p>
<p><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a> <a href="https://travis-ci.org/leonawicz/tabr"><img src="https://travis-ci.org/leonawicz/tabr.svg?branch=master" alt="Travis-CI Build Status"></a> <a href="https://ci.appveyor.com/project/leonawicz/tabr"><img src="https://ci.appveyor.com/api/projects/status/github/leonawicz/tabr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a> <a href="https://codecov.io/github/leonawicz/tabr?branch=master"><img src="https://img.shields.io/codecov/c/github/leonawicz/tabr/master.svg" alt="Coverage Status"></a></p>
<p><a href="https://cran.r-project.org/package=tabr"><img src="http://www.r-pkg.org/badges/version/tabr" alt="CRAN status"></a> <a href="https://cran.r-project.org/package=tabr"><img src="http://cranlogs.r-pkg.org/badges/grand-total/tabr" alt="CRAN downloads"></a> <a href="https://github.com/leonawicz/tabr"><img src="https://img.shields.io/github/stars/leonawicz/tabr.svg?style=social&amp;label=Github" alt="Github Stars"></a></p>
<p><a href="https://ko-fi.com/leonawicz"><img src="https://img.shields.io/badge/Donate-Buy%20me%20a%20coffee-yellowgreen.svg" alt="Donate"></a></p>
<div id="overview-" class="section level2">
<h2 class="hasAnchor">
<a href="#overview-" class="anchor"></a>Overview <img src="https://github.com/leonawicz/tabr/blob/master/data-raw/tabr_logo.png?raw=true" width="320" style="float:right;margin-left:10px;width:320px;">
</h2>
<p>The <code>tabr</code> package provides a music notation syntax and a collection of music programming functions for generating, manipulating, organizing and analyzing musical information in R.</p>
<p>The music notation framework facilitates creating and analyzing music data in notation form; i.e, more from the perspective and in the language of a musician than, say, an audio engineer.</p>
<hr>
<p><em>If you enjoy my R community contributions, consider</em> <strong><em><a href="https://ko-fi.com/leonawicz">buying me a coffee in Ko-fi</a></em></strong> <em>so I can keep developing and maintaining this and other packages :)</em></p>
<hr>
<div id="music-data-structures" class="section level3">
<h3 class="hasAnchor">
<a href="#music-data-structures" class="anchor"></a>Music data structures</h3>
<p>Music data can be viewed, manipulated and analyzed while in different forms of representation based around different data structures: strings and data frames. Each representation offers advantages over the other for different use cases.</p>
<p>Music syntax can be entered directly and represented in character strings to minimize the formatting overhead of data entry by using simple data structures, for example when wanting to quickly enter and transcribe short pieces of music syntax in R into sheet music or tablature files. You can also enter sound and time together for the <code>music</code> class, and no need to repeat consecutive durations until a change.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">x &lt;-<span class="st"> "a, c e g# a ac'e' ac'e'~ ac'e' a c' e' a'"</span></a>
<a class="sourceLine" id="cb1-2" title="2">x &lt;-<span class="st"> </span><span class="kw"><a href="reference/valid-notes.html">as_noteworthy</a></span>(x)</a>
<a class="sourceLine" id="cb1-3" title="3">x</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt; &lt;Noteworthy string&gt;</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt;   Format: space-delimited time</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt;   Values: a, c e g# a &lt;ac'e'&gt; &lt;ac'e'~&gt; &lt;ac'e'&gt; a c' e' a'</span></a>
<a class="sourceLine" id="cb1-7" title="7"></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(x)</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt; &lt;Noteworthy string&gt;</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt;   Timesteps: 12 (9 notes, 3 chords)</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co">#&gt;   Octaves: tick</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">#&gt;   Accidentals: sharp</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co">#&gt;   Format: space-delimited time</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co">#&gt;   Values: a, c e g# a &lt;ac'e'&gt; &lt;ac'e'~&gt; &lt;ac'e'&gt; a c' e' a'</span></a>
<a class="sourceLine" id="cb1-15" title="15"></a>
<a class="sourceLine" id="cb1-16" title="16">y &lt;-<span class="st"> "a,8 c et8 g# a ac'e'4. ac'e'~8 ac'e'4 at4 c' e' a'1"</span></a>
<a class="sourceLine" id="cb1-17" title="17">y &lt;-<span class="st"> </span><span class="kw"><a href="reference/music.html">as_music</a></span>(y)</a>
<a class="sourceLine" id="cb1-18" title="18"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(y)</a>
<a class="sourceLine" id="cb1-19" title="19"><span class="co">#&gt; &lt;Music string&gt;</span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="co">#&gt;   Timesteps: 12 (9 notes, 3 chords)</span></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co">#&gt;   Octaves: tick</span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="co">#&gt;   Accidentals: sharp</span></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="co">#&gt;   Key signature: c</span></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="co">#&gt;   Time signature: 4/4</span></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="co">#&gt;   Tempo: 2 = 60</span></a>
<a class="sourceLine" id="cb1-26" title="26"><span class="co">#&gt;   Lyrics: NA</span></a>
<a class="sourceLine" id="cb1-27" title="27"><span class="co">#&gt;   Format: space-delimited time</span></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="co">#&gt;   Values: a,8 c8 et8 g#t8 at8 &lt;ac'e'&gt;4. &lt;ac'e'~&gt;8 &lt;ac'e'&gt;4 at4 c't4 e't4 a'1</span></a>
<a class="sourceLine" id="cb1-29" title="29"></a>
<a class="sourceLine" id="cb1-30" title="30"><span class="kw"><a href="reference/music.html">music_split</a></span>(y)</a>
<a class="sourceLine" id="cb1-31" title="31"><span class="co">#&gt; $notes</span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="co">#&gt; &lt;Noteworthy string&gt;</span></a>
<a class="sourceLine" id="cb1-33" title="33"><span class="co">#&gt;   Format: space-delimited time</span></a>
<a class="sourceLine" id="cb1-34" title="34"><span class="co">#&gt;   Values: a, c e g# a &lt;ac'e'&gt; &lt;ac'e'~&gt; &lt;ac'e'&gt; a c' e' a'</span></a>
<a class="sourceLine" id="cb1-35" title="35"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-36" title="36"><span class="co">#&gt; $info</span></a>
<a class="sourceLine" id="cb1-37" title="37"><span class="co">#&gt; &lt;Note info string&gt;</span></a>
<a class="sourceLine" id="cb1-38" title="38"><span class="co">#&gt;   Format: space-delimited time</span></a>
<a class="sourceLine" id="cb1-39" title="39"><span class="co">#&gt;   Values: 8 8 t8 t8 t8 4. 8 4 t4 t4 t4 1</span></a>
<a class="sourceLine" id="cb1-40" title="40"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-41" title="41"><span class="co">#&gt; $lyrics</span></a>
<a class="sourceLine" id="cb1-42" title="42"><span class="co">#&gt; [1] NA</span></a>
<a class="sourceLine" id="cb1-43" title="43"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-44" title="44"><span class="co">#&gt; $key</span></a>
<a class="sourceLine" id="cb1-45" title="45"><span class="co">#&gt; [1] "c"</span></a>
<a class="sourceLine" id="cb1-46" title="46"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-47" title="47"><span class="co">#&gt; $time</span></a>
<a class="sourceLine" id="cb1-48" title="48"><span class="co">#&gt; [1] "4/4"</span></a>
<a class="sourceLine" id="cb1-49" title="49"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-50" title="50"><span class="co">#&gt; $tempo</span></a>
<a class="sourceLine" id="cb1-51" title="51"><span class="co">#&gt; [1] "2 = 60"</span></a></code></pre></div>
<p>Functions exist for directly performing various mathematical, logical and organizational operations and musical transformations on strings like the one above by checking their music syntax validity and adding custom classes and methods to these strings (more on this below). <code>tabr</code> offers special object classes that facilitate working with music data and notation in ways that are natural to R, robust, tidy, and lend themselves well to transcription as well as analysis.</p>
<p>Of course, none of this will work on character strings that are not “noteworthy” or “musical”, for example. Invalid, unworthy syntax is rejected early with an error, preventing corrupted music syntax from causing unexpected issues later on.</p>
<p>The same music data can also be organized in tidy data frames, allowing for a more familiar and powerful approach to the analysis of large amounts of structured music data.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">x &lt;-<span class="st"> "a,8 c e r r c a, g#, a ac'e'"</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw"><a href="reference/music.html">as_music</a></span>(x) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="reference/as_music_df.html">as_music_df</a></span>()</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt; # A tibble: 10 x 12</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt;    duration pitch note  semitone octave  freq pitch_int scale_int slur </span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;int&gt;  &lt;int&gt; &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt;  1 8        a,    a           57      2  110.        NA &lt;NA&gt;      &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt;  2 8        c     c           48      3  131.         3 m3        &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt;  3 8        e     e           52      3  165.         4 M3        &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt;  4 8        r     r           NA     NA   NA         NA &lt;NA&gt;      &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt;  5 8        r     r           NA     NA   NA         NA &lt;NA&gt;      &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt;  6 8        c     c           48      3  131.        -4 M3        &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#&gt;  7 8        a,    a           57      2  110.        -3 m3        &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt;  8 8        g#,   g#          56      2  104.        -1 m2        &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt;  9 8        a     a           57      3  220.        13 m9        &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">#&gt; 10 8        ac'e' ace         57      3  220.         0 P1        &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#&gt; # ... with 3 more variables: slide &lt;lgl&gt;, dotted &lt;int&gt;, annotation &lt;chr&gt;</span></a></code></pre></div>
<p>Several functions are available for mapping seamlessly between and manipulating these data structures and their representations of musical information.</p>
</div>
<div id="transcription" class="section level3">
<h3 class="hasAnchor">
<a href="#transcription" class="anchor"></a>Transcription</h3>
<p>Music programming in the notation syntax provided by <code>tabr</code> can be used for a variety of purposes, but it also integrates cohesively with the package’s transcription functions. The package also provides API wrapper functions for transcribing music notation in R into guitar tablature (“tabs”) and basic sheet music using <a href="http://lilypond.org/">LilyPond</a>.</p>
<p>LilyPond is an open source music engraving program for generating high quality sheet music based on markup syntax. <code>tabr</code> generates LilyPond files from R code and can pass them to LilyPond to be rendered into sheet music pdf files. While LilyPond caters to sheet music in general and <code>tabr</code> can be used to create basic sheet music, the transcription functions focus on leveraging LilyPond specifically for creating quality guitar tablature. You do not need to use it for guitar tablature, but for vocal or other instrument tracks, you can change settings, such as suppressing a tab staff from your sheet music.</p>
<p>While LilyPond is listed as a system requirement for <code>tabr</code>, you can use the package for music analysis without installing LilyPond if you do not intend to render tabs. You can even use the <code>lilypond</code> function to write LilyPond files to disk without the software installed, since this is only a case of R writing plain text files in the proper format. The only functions in the package that require a LilyPond installation are <code>tab</code>, <code>midily</code>, <code>miditab</code> and any <code>render_*</code> functions.</p>
</div>
<div id="use-case-considerations" class="section level3">
<h3 class="hasAnchor">
<a href="#use-case-considerations" class="anchor"></a>Use case considerations</h3>
<p><code>tabr</code> offers a useful but limited LilyPond API and is not intended to access all LilyPond functionality from R, nor is transcription via the API the entire scope of <code>tabr</code>. If you are only creating sheet music on a case by case basis, write your own LilyPond files manually. There is no need to use <code>tabr</code> or limit yourself to its existing LilyPond API or its guitar tablature focus.</p>
<p>However, if you are generating music notation programmatically, <code>tabr</code> provides the ability to do so in R and offers the added benefit of converting what you write in R code to the LilyPond file format to be rendered as printable sheet music.</p>
<p>With ongoing development, the music programming side of <code>tabr</code> will likely continue to grow much more than the transcription functionality.</p>
</div>
<div id="why-lilypond-for-transcription" class="section level3">
<h3 class="hasAnchor">
<a href="#why-lilypond-for-transcription" class="anchor"></a>Why LilyPond for transcription?</h3>
<p>LilyPond is an exceptional sheet music engraving program.</p>
<ul>
<li>It produces professional, high quality output.</li>
<li>It is open source.</li>
<li>It offers a command line access point for a programmatic approach to music notation.</li>
<li>It is developed and utilized by a large community.</li>
<li>Most GUI-based applications are WYSIWYG and force a greater limitation on what you can do and what it will look like after you do it. It is only for the better that <code>tabr</code> is the bottleneck in transcription limitations rather than the music engraving software it wraps around.</li>
</ul>
</div>
<div id="transcription-functionality-and-support" class="section level3">
<h3 class="hasAnchor">
<a href="#transcription-functionality-and-support" class="anchor"></a>Transcription functionality and support</h3>
<p>The <code>tabr</code> package offers the following for transcription:</p>
<ul>
<li>Render guitar tablature and sheet music to pdf or png.</li>
<li>Write accompanying MIDI files that can respect repeat notation and transposition in the sheet music (under reasonable conditions).</li>
<li>Support tablature for other string instruments besides guitar such as bass or banjo.</li>
<li>Support for instruments with different numbers of strings.</li>
<li>Support for arbitrary instrument tuning.</li>
<li>Offers inclusion (or exclusion) of formal music staves above tab staves, such as treble and bass clef staves for complete rhythm and timing information.</li>
<li>If music staff is included, the tab staff can be suppressed, e.g., for vocal tracks.</li>
<li>Track-specific setup for features like instrument type, tuning and supplemental music staves.</li>
<li>Provides common notation such as slide, bend, hammer on, pull off, slur, tie, staccato, dotted notes, visible and silent rests.</li>
<li>Allows arbitrary tuplet structure.</li>
<li>Above-staff text annotation.</li>
<li>Percent and volta repeat section notation.</li>
<li>Note transposition.</li>
<li>Staff transposition.</li>
<li>Multiple voices per track and multiple tracks per score.</li>
<li>Chord symbols above staff</li>
<li>Chord fretboard diagrams and chord chart at top of score.</li>
<li>A variety of layout control options covering settings from score attributions to font size.</li>
<li>Optional alternative input format allowing the user to provide string/fret combinations (along with key signature and instrument tuning) to map to pitch.</li>
</ul>
</div>
<div id="midi-support" class="section level3">
<h3 class="hasAnchor">
<a href="#midi-support" class="anchor"></a>MIDI support</h3>
<p>The package offers nominal MIDI file output support in conjunction with rendering sheet music. MIDI file writing is still handled by LilyPond, which means it must be based on a valid LilyPond file output created by <code>tabr</code>.</p>
<p>You can read MIDI files into R. This support relies on the <code>tuneR</code> package to read MIDI files and attempts to structure the MIDI data to integrate as best as possible with the data structures and functionality found throughout <code>tabr</code>.</p>
<p>An existing MIDI file can also be passed through directly to LilyPond to attempt to create sheet music from the MIDI file if possible, using one of LilyPond’s command line utilities for MIDI to LilyPond conversion followed by rendering the generated LilyPond file to sheet music.</p>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div id="upcoming-v040-release" class="section level3">
<h3 class="hasAnchor">
<a href="#upcoming-v040-release" class="anchor"></a>Upcoming v0.4.0 release</h3>
<p>Music data analysis has been expanding significantly since version 0.3.0, which brought many new functions to <code>tabr</code>. Version 0.3.5 brought even more as well as an alternative input format for guitar tab transcription.</p>
<p>The upcoming version 0.4.0 is a huge release. There is so much more in terms of data analysis. There is also better MIDI file support. There are more functions for tidy analysis. Several internal and user-facing functions have been vectorized. Other functions have been generalized that previously lacked an approach to chords in certain contexts. The entire package has been significantly optimized for better performance over previous versions.</p>
<p>More can be done with music notation syntax converters, moving to and from data frames, and between classes. New classes <code>noteinfo</code> and <code>music</code> have been added along with accompanying functions. Support for triplets have been integrated into <code>noteinfo</code> using the <code>t</code>-prefix notation, which is supported in turn now by <code>music</code> and by <code>phrase</code>.</p>
<p>Since it’s still in early versions, several aspects of the package and its approaches to working with musical information have been reimagined, corrected, enhanced and made more resilient while keeping to the simple syntax and premises.</p>
<p>All things considered, the next release of <code>tabr</code> is the one to use. You can get many of these developments now by installing version 0.3.9.9000 from GitHub, which all the current online documentation is updated for (this document, the <code>pkgdown</code> website, help files and vignettes).</p>
<p>Install the CRAN release of <code>tabr</code> with</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"tabr"</span>)</a></code></pre></div>
<p>Install the development version from GitHub with</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb4-2" title="2">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"leonawicz/tabr"</span>)</a></code></pre></div>
</div>
</div>
<div id="noteworthy-strings" class="section level2">
<h2 class="hasAnchor">
<a href="#noteworthy-strings" class="anchor"></a>Noteworthy strings</h2>
<p>As a quick introduction and to get oriented to the music notation syntax offered by <code>tabr</code>, consider the concept of a noteworthy string. This is like any other character string, except that what makes a string noteworthy is that its content consists strictly of valid <code>tabr</code> music notation syntax. It can be parsed unambiguously and meaningfully into a musical phrase (see next section) and can be processed as input to the various package functions that inspect and manipulate musical information.</p>
<p>A simple character string like <code>"c e g"</code>, or alternatively as a vector, <code><a href="https://rdrr.io/r/base/c.html">c("c", "e", "g")</a></code>, is a noteworthy string. The single lowercase letter <code>"a"</code> is noteworthy. So are <code>"a_"</code> and <code>"a#"</code> (flat and sharp). However, <code>"A"</code> is not, nor is <code>"z"</code>. There are other pieces of valid syntax than just the lowercase letters <code>a</code> through <code>g</code> and sharp and flat notation. The most important for specifying pitch is to indicate the octave number, either in tick (recommended; comma and single quote) or integer format (not recommended, more limited utility). For all the available syntax specifications and related details see the package vignettes.</p>
<p>Noteworthiness can be checked on any character string. When defining noteworthy strings you can define them like any other character vector. However, you will notice that package functions that operate on noteworthy strings and whose output is another noteworthy string will yield a string with the supplemental <code>noteworthy</code> class. This has its own print and summary methods. Several other generic methods are also implemented. While many functions will attempt to coerce a string to <code>noteworthy</code>, not all will and some methods are implemented specifically for the class.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">x &lt;-<span class="st"> "g#, c d# g#c'd#'"</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw"><a href="reference/valid-notes.html">as_noteworthy</a></span>(x)</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt; &lt;Noteworthy string&gt;</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt;   Format: space-delimited time</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt;   Values: g#, c d# &lt;g#c'd#'&gt;</span></a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7">x &lt;-<span class="st"> "g#2 c d# g#c4d#4"</span> <span class="co"># equivalent octave numbering</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="kw"><a href="reference/valid-notes.html">as_noteworthy</a></span>(x)</a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt; &lt;Noteworthy string&gt;</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt;   Format: space-delimited time</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt;   Values: g#2 c d# &lt;g#c4d#4&gt;</span></a>
<a class="sourceLine" id="cb5-12" title="12"></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="kw"><a href="reference/valid-notes.html">is_note</a></span>(x)</a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; [1]  TRUE  TRUE  TRUE FALSE</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="kw"><a href="reference/valid-notes.html">is_chord</a></span>(x)</a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt; [1] FALSE FALSE FALSE  TRUE</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="kw"><a href="reference/chord_is_major.html">chord_is_major</a></span>(x)</a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">#&gt; [1]   NA   NA   NA TRUE</span></a>
<a class="sourceLine" id="cb5-19" title="19">(x &lt;-<span class="st"> </span><span class="kw"><a href="reference/transpose.html">transpose</a></span>(x, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">#&gt; &lt;Noteworthy string&gt;</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">#&gt;   Format: space-delimited time</span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="co">#&gt;   Values: a2 c# e &lt;ac#4e4&gt;</span></a>
<a class="sourceLine" id="cb5-23" title="23"></a>
<a class="sourceLine" id="cb5-24" title="24"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(x)</a>
<a class="sourceLine" id="cb5-25" title="25"><span class="co">#&gt; &lt;Noteworthy string&gt;</span></a>
<a class="sourceLine" id="cb5-26" title="26"><span class="co">#&gt;   Timesteps: 4 (3 notes, 1 chord)</span></a>
<a class="sourceLine" id="cb5-27" title="27"><span class="co">#&gt;   Octaves: integer</span></a>
<a class="sourceLine" id="cb5-28" title="28"><span class="co">#&gt;   Accidentals: sharp</span></a>
<a class="sourceLine" id="cb5-29" title="29"><span class="co">#&gt;   Format: space-delimited time</span></a>
<a class="sourceLine" id="cb5-30" title="30"><span class="co">#&gt;   Values: a2 c# e &lt;ac#4e4&gt;</span></a>
<a class="sourceLine" id="cb5-31" title="31"></a>
<a class="sourceLine" id="cb5-32" title="32"><span class="kw"><a href="reference/note-summaries.html">distinct_pitches</a></span>(x)</a>
<a class="sourceLine" id="cb5-33" title="33"><span class="co">#&gt; &lt;Noteworthy string&gt;</span></a>
<a class="sourceLine" id="cb5-34" title="34"><span class="co">#&gt;   Format: space-delimited time</span></a>
<a class="sourceLine" id="cb5-35" title="35"><span class="co">#&gt;   Values: a2 c# e a c#4 e4</span></a>
<a class="sourceLine" id="cb5-36" title="36"><span class="kw"><a href="reference/note-summaries.html">distinct_pitches</a></span>(x) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="reference/pitch_freq.html">pitch_freq</a></span>() <span class="co"># in Hz</span></a>
<a class="sourceLine" id="cb5-37" title="37"><span class="co">#&gt; [1] 110.0000 138.5913 164.8138 220.0000 277.1826 329.6276</span></a></code></pre></div>
<p>There is also a <code>noteinfo</code> class and a <code>music</code> class. You can learn more in the vignettes.</p>
</div>
<div id="tidy-music-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#tidy-music-analysis" class="anchor"></a>Tidy music analysis</h2>
<p>Ideally music data already exists in a data frame format. But if it doesn’t, or if you just wrote out a new note sequence like below, getting this data into a data frame for a more tidy approach to analysis is easy. Conversion can also populate several derivative variables in the process.</p>
<p>In the earlier example you saw the result of calling <code>as_music_df</code> on a noteworthy string.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">x &lt;-<span class="st"> "a, c e r r c a, g#, a ac'e'"</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw"><a href="reference/as_music_df.html">as_music_df</a></span>(x)</a></code></pre></div>
<p>You may have noticed that rests (<code>r</code>) are allowed for timesteps and that functions that compute lagged intervals respect these gaps. Since all that was provided to <code>as_music_df</code> was a string of pitches, there are no time variables in the current data frame. However, discrete timesteps still exist and they do not have to contain notes.</p>
<p>There are a number of derivative columns. If you are working with a large sequence of music, there is no need to carry all of these along through your analysis if you do not need them. They can be created using various package functions and you can build onto your data frame and transform variables later with <code>mutate</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb7-2" title="2">x &lt;-<span class="st"> "a, c e r r c a, g#, a ac'e'"</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw">tibble</span>(<span class="dt">pitch =</span> <span class="kw"><a href="reference/note-coerce.html">as_vector_time</a></span>(x)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">scale_int =</span> <span class="kw"><a href="reference/intervals.html">scale_diff</a></span>(pitch))</a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt;    pitch      scale_int</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#&gt;    &lt;notwrthy&gt; &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#&gt;  1 a,         &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">#&gt;  2 c          m3       </span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#&gt;  3 e          M3       </span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt;  4 r          &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">#&gt;  5 r          &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="co">#&gt;  6 c          M3       </span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="co">#&gt;  7 a,         m3       </span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="co">#&gt;  8 g#,        m2       </span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">#&gt;  9 a          m9       </span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="co">#&gt; 10 ac'e'      P1</span></a></code></pre></div>
<p>In fact, it’s much more powerful to create the columns according to your needs using specific functions and their various arguments. But <code>as_music_df</code> is convenient and also offers some additional arguments. Adding <code>key</code> and <code>scale</code> allows for scale degrees. <code>scale</code> is diatonic by default but does not have to be.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">x &lt;-<span class="st"> "g g#"</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw"><a href="reference/as_music_df.html">as_music_df</a></span>(x, <span class="dt">key =</span> <span class="st">"am"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span><span class="kw">select</span>(pitch, key, scale, scale_deg)</a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt; # A tibble: 2 x 4</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">#&gt;   pitch key   scale    scale_deg</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;        &lt;int&gt;</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">#&gt; 1 g     am    diatonic         7</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt; 2 g#    am    diatonic        NA</span></a>
<a class="sourceLine" id="cb8-9" title="9"></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="kw"><a href="reference/as_music_df.html">as_music_df</a></span>(x, <span class="dt">key =</span> <span class="st">"am"</span>, <span class="dt">scale =</span> <span class="st">"harmonic_minor"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="st">  </span><span class="kw">select</span>(pitch, key, scale, scale_deg)</a>
<a class="sourceLine" id="cb8-12" title="12"><span class="co">#&gt; # A tibble: 2 x 4</span></a>
<a class="sourceLine" id="cb8-13" title="13"><span class="co">#&gt;   pitch key   scale          scale_deg</span></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;int&gt;</span></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="co">#&gt; 1 g     am    harmonic_minor        NA</span></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="co">#&gt; 2 g#    am    harmonic_minor         7</span></a></code></pre></div>
<p><code>tabr</code> offers many functions for manipulating and analyzing music data and working in music notation. See the collection of vignettes for more information on music programming and analysis.</p>
</div>
<div id="basic-transcription-example" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-transcription-example" class="anchor"></a>Basic transcription example</h2>
<p>Rendering sheet music is based on building up pieces of musical information culminating in a score. The fundamental object to consider in the transcription context is a phrase. A phrase is created from a noteworthy string and incorporates additional information, most importantly time and rhythm. It can also include positional information such as the instrument string on which a note is played. Outside of rendering tabs, there is no reason to construct phrase objects. Everything from the phrase object on up is about using the R to LilyPond pipeline to render some kind of sheet music document.</p>
<p>If you are doing music analysis on noteworthy strings and are combining the note, pitch or chord information with time, that can be done with a corresponding variable; using a phrase object is not the way to do that because phrase objects are intended for the construction of LilyPond markup syntax.</p>
<p>As a brief example, recreate the tablature shown in the image above (minus the R logo). Here are the steps.</p>
<ul>
<li>Define a musical phrase with <code>phrase</code> or the shorthand alias <code>p</code>.</li>
<li>Add the phrase to a <code>track</code>.</li>
<li>Add the track to a <code>score</code>.</li>
<li>Render the score to pdf with <code>tab</code>.</li>
</ul>
<p>The code is shown below, but first some context.</p>
<div id="constructing-a-musical-phrase" class="section level3">
<h3 class="hasAnchor">
<a href="#constructing-a-musical-phrase" class="anchor"></a>Constructing a musical phrase</h3>
<p>A phrase here does not require a strict definition. Think of it as the smallest piece of musical structure you intend to string together. The first argument to <code>phrase</code> is a string describing notes of a specific pitch (or rests: “r”), separated in time by spaces. For chords, just remove spaces to indicate simultaneous notes. Integers are appended to indicate the octave number so that the pitch is unambiguous. For example, a rest followed by a sequence of notes might be given by <code>notes = "r a2 c3 f3 d3 a3 f3"</code>.</p>
<p>The second argument is a similar string giving note metadata. In this example there is nothing to add but the time durations. Whole notes taking up an entire measure of music are given by 1, half notes by 2, quarter notes 4, eighth notes 8, and so on. To specify a quarter note rest followed by a sequence of eighth notes, use <code>info = "4 8 8 8 8 8 8"</code> (or shorten to just <code>info = "4 8*6"</code>). This basic example does not require specifying additional note information such as dotted notes for different fractions of time, staccato notes, ties/slurs, slides, bends, hammer ons and pull offs, etc. These specifications are covered in the vignette tutorials.</p>
<p>The third argument, <code>string</code>, is optional but very important for accurate guitar tablature. For general sheet music, this argument can be ignored. In similar format, it specifies the strings of the guitar (or other stringed, fretted instrument) on which notes are played. Providing this information fixes the fret-string combinations so that LilyPond does not have to guess what position on the neck of the guitar to play a specific note. An inability to specify this in various tablature notation software (or laziness by the user), is a common cause of inaccurate tabs scouring the internet, where even when the notes are correct they are written in the tab suggesting they be played in positions no one would sensibly use. Note that the <code>x</code> shown below is just a placeholder indicating no need to specify a string for the quarter note rest.</p>
<p>The example below employs a couple shortcuts to further reduce typing. The first is to use the <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code> in-string expansion operator mentioned above to avoid typing a long series of eighth notes. Second, it drops explicit reference to octave number three since octave 3 is the default octave in LilyPond where it similarly does not need to be written explicitly. This applies to all but the first note below.</p>
<p>While explicit string numbers are not needed for this example, they are provided anyway for full context. Dropping the <code>string</code> argument would further reduce typing.</p>
<p>This is the general approach, but there are multiple ways to create equivalent phrase objects in <code>tabr</code>.</p>
</div>
<div id="score-metadata-and-accessing-lilypond" class="section level3">
<h3 class="hasAnchor">
<a href="#score-metadata-and-accessing-lilypond" class="anchor"></a>Score metadata and accessing LilyPond</h3>
<p>Finally, specify some song metadata to reproduce the original staff: the key of D minor, common time, and the tempo.</p>
<p>If LilyPond is installed on your system (and added to your system path variable on Windows systems), <code>tab</code> should call it successfully. Windows users are recommended to just add LilyPond’s <code>bin</code> directory to the system path. This will take care of LilyPond as well as its bundled Python and MIDI support. As an example for Windows users, if the LilyPond executable is at <code>C:/Program Files (x86)/LilyPond/usr/bin/lilypond.exe</code>, then add <code>C:/Program Files (x86)/LilyPond/usr/bin</code> to the system path.</p>
</div>
<div id="minimal-r-code-example" class="section level3">
<h3 class="hasAnchor">
<a href="#minimal-r-code-example" class="anchor"></a>Minimal R code example</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tabr)</a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="kw"><a href="reference/phrase.html">p</a></span>(<span class="st">"r a2 c f d a f"</span>, <span class="st">"4 8*6"</span>, <span class="st">"x 5 5 4 4 3 4"</span>) <span class="op">%&gt;%</span><span class="st"> </span>track <span class="op">%&gt;%</span><span class="st"> </span>score <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">  </span><span class="kw"><a href="reference/tab.html">tab</a></span>(<span class="st">"phrase.pdf"</span>, <span class="dt">key =</span> <span class="st">"dm"</span>, <span class="dt">time =</span> <span class="st">"4/4"</span>, <span class="dt">tempo =</span> <span class="st">"4 = 120"</span>)</a></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co">#&gt; #### Engraving score to phrase.pdf ####</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co">#&gt; GNU LilyPond 2.18.2</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co">#&gt; Processing `./phrase.ly'</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">#&gt; Parsing...</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co">#&gt; Interpreting music...</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">#&gt; Preprocessing graphical objects...</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="co">#&gt; Interpreting music...</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">#&gt; MIDI output to `./phrase.mid'...</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co">#&gt; Finding the ideal number of pages...</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="co">#&gt; Fitting music on 1 page...</span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="co">#&gt; Drawing systems...</span></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="co">#&gt; Layout output to `./phrase.ps'...</span></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="co">#&gt; Converting to `./phrase.pdf'...</span></a>
<a class="sourceLine" id="cb10-14" title="14"><span class="co">#&gt; Success: compilation successfully completed</span></a></code></pre></div>
<p>The pdf output looks like this:</p>
<p>

<img src="https://github.com/leonawicz/tabr/blob/master/data-raw/vignette-pngs/ex00.png?raw=true" class="centerimg" width="50%"></p>
<p>For comparison, if you use string-fret specification to construct the above phrase, one way to do so is the following.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw"><a href="reference/sf_phrase.html">sfp</a></span>(<span class="st">"r;r;4 5;0;8 3 4;3; 0 3;2; 4;3;"</span>)</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="co">#&gt; &lt;Musical phrase&gt;</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="co">#&gt; r4 &lt;a,\5&gt;8 &lt;c\5&gt;8 &lt;f\4&gt;8 &lt;d\4&gt;8 &lt;a\3&gt;8 &lt;f\4&gt;8</span></a></code></pre></div>
<p>It may not look particularly beneficial here, but for more complex music it can be easier to reason about the phrase under construction when using this format to bind information by time step rather by information type. See <code><a href="reference/sf_phrase.html">?sf_phrase</a></code> for a comparison with <code>phrase</code> and the various ways you can do phrase construction in <code>tabr</code> for equivalent results. If you are looking to do quick, easy and basic tabbing, you may want to consider using the single-argument input method of the <code>sf_phrase</code> function. The package vignettes focus on general use cases using the <code>phrase</code> function rather than <code>sf_phrase</code>.</p>
<p>Note above that <code>tabr</code> also exports the pipe <code><a href="reference/pipe.html">%&gt;%</a></code> operator. Even given the hierarchy of objects involved in the series of steps to move from a phrase to a rendered pdf, a short example like this does not even require a single assignment. While music can be quite complex and a full score will be much longer, <code>tabr</code> strives to minimize the work while still forcing some sense of interpretable, organized structure. For long and complex music, it can require some effort and practice to ensure your approach to transcription in your R code is not opaque.</p>
</div>
</div>
<div id="references-and-resources" class="section level2">
<h2 class="hasAnchor">
<a href="#references-and-resources" class="anchor"></a>References and resources</h2>
<p>There are several vignette tutorials and examples at the <code>tabr</code> <a href="https://leonawicz.github.io/tabr/">website</a>.</p>
<p><img src="https://raw.githubusercontent.com/r-music/site/master/img/logo.png" style="float:left;margin-right:20px;" width="120"></p>
<div>

<h3 style="padding-top:50px;">

R-Music

</h3>

<h4 style="padding:0px;margin-top:5px;margin-bottom:5px;">

R for music data extraction and analysis

</h4>

See the <a href="https://github.com/r-music">R-Music</a> organization on
GitHub for more R packages related to music data extraction and
analysis.<br> The R-Music <a href="https://r-music.rbind.io/">blog</a>
provides package introductions and examples.

</div>
<div id="other-packages" class="section level3">
<h3 class="hasAnchor">
<a href="#other-packages" class="anchor"></a>Other packages</h3>
<ul>
<li>The <a href="https://CRAN.R-project.org/package=tuneR">tuneR</a> package for analysis of music and speech by Uwe Ligges, Sebastian Krey, Olaf Mersmann, and Sarah Schnackenberg.</li>
</ul>
<hr>
<p>Please note that the <code>tabr</code> project is released with a <a href="https://leonawicz.github.io/tabr/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=tabr">https://​cloud.r-project.org/​package=tabr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/leonawicz/tabr">https://​github.com/​leonawicz/​tabr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/leonawicz/tabr/issues">https://​github.com/​leonawicz/​tabr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://leonawicz.github.io/">Matthew Leonawicz</a> <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://leonawicz.github.io/">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
