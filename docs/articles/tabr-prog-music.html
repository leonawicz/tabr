<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The music class • tabr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="The music class">
<meta property="og:description" content="tabr">
<meta property="og:image" content="https://leonawicz.github.io/tabr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Programming</li>
    <li>
      <a href="../articles/tabr-prog-nw.html">Noteworthiness</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-scales.html">Musical scales</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-notes.html">Note functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-chords.html">Chord functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-noteinfo.html">Time and note info</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-music.html">The music class</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-converters.html">Syntax converters</a>
    </li>
    <li>
      <a href="../articles/tabr-fretboard.html">Fretboard diagram plots</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Transcription</li>
    <li>
      <a href="../articles/tabr-basics.html">Basic overview</a>
    </li>
    <li>
      <a href="../articles/tabr-phrases.html">Musical phrases</a>
    </li>
    <li>
      <a href="../articles/tabr-helpers.html">Phrase helpers</a>
    </li>
    <li>
      <a href="../articles/tabr-chords.html">Chords</a>
    </li>
    <li>
      <a href="../articles/tabr-repeats.html">Repeats</a>
    </li>
    <li>
      <a href="../articles/tabr-tracks-scores.html">Tracks and scores</a>
    </li>
    <li>
      <a href="../articles/tabr-engraving.html">Render scores</a>
    </li>
    <li>
      <a href="../articles/tabr-snippets.html">Music snippets</a>
    </li>
    <li>
      <a href="../articles/tabr-chordchart.html">Render chord chart</a>
    </li>
    <li>
      <a href="../articles/tabr-tunings.html">Strings and tunings</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tabr-ex1.html">Tuning and capo</a>
    </li>
    <li>
      <a href="../articles/tabr-ex2.html">Multiple voices</a>
    </li>
    <li>
      <a href="../articles/tabr-ex3.html">AC2 - Ezio's family</a>
    </li>
    <li>
      <a href="../articles/tabr-ex4.html">Gin Wigmore - Devil in me</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leonawicz/tabr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The music class</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/tabr/blob/HEAD/vignettes/tabr-prog-music.Rmd" class="external-link"><code>vignettes/tabr-prog-music.Rmd</code></a></small>
      <div class="hidden name"><code>tabr-prog-music.Rmd</code></div>

    </div>

    
    
<p>Previous vignettes introduced the <code>noteworthy</code> and
<code>noteinfo</code> classes.</p>
<div class="section level2">
<h2 id="constructing-a-music-object">Constructing a music object<a class="anchor" aria-label="anchor" href="#constructing-a-music-object"></a>
</h2>
<p>First create a music object from <code>noteworthy</code> and
<code>notinfo</code> objects. An object of each class can be combined to
form a <code>music</code>-class object.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">notes</span> <span class="op">&lt;-</span> <span class="st">"c d e f g a b ceg~ ceg"</span></span>
<span><span class="va">info</span> <span class="op">&lt;-</span> <span class="st">"8*8 1"</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/music.html">as_music</a></span><span class="op">(</span><span class="va">notes</span>, <span class="va">info</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: c8 d8 e8 f8 g8 a8 b8 &lt;ceg~&gt;8 &lt;ceg&gt;1</span></span></code></pre>
<p><code><a href="../reference/music.html">as_music()</a></code> offers several additional arguments. Music
objects also store key signature, time signature and tempo. They include
default values: key of C, 4/4 common time, and 60 half note beats per
measure. However, unless you are transcribing your data to sheet music,
you can probably ignore these object attributes entirely. Optionally you
can also include a lyrics object.</p>
<p>Here is a closer look at the music object.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Timesteps: 9 (7 notes, 2 chords)</span></span>
<span><span class="co">#&gt;   Octaves: tick</span></span>
<span><span class="co">#&gt;   Accidentals: flat</span></span>
<span><span class="co">#&gt;   Key signature: c</span></span>
<span><span class="co">#&gt;   Time signature: 4/4</span></span>
<span><span class="co">#&gt;   Tempo: 2 = 60</span></span>
<span><span class="co">#&gt;   Lyrics: NA</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: c8 d8 e8 f8 g8 a8 b8 &lt;ceg~&gt;8 &lt;ceg&gt;1</span></span></code></pre>
<p>Some of the summary information is the same as seen with noteworthy
objects and more is added that is unique to music objects. Just to note,
octave tick format is explicitly shown as it is with noteworthy objects,
though it is the only valid format for music objects.</p>
</div>
<div class="section level2">
<h2 id="deconstructing-a-music-object">Deconstructing a music object<a class="anchor" aria-label="anchor" href="#deconstructing-a-music-object"></a>
</h2>
<p>Music analysis generally requires disentangling time and sound. For
this reason, building a music object from notes and note info is not
directly useful for analysis. It is a convenient object structure,
however.</p>
<p>Aside from generic methods and a handful of other functions that make
sense to apply to any of these three classes, most functions in the
package that operate on noteworthy strings intentionally do not accept a
music object directly. This helps keep in mind that it is not ideal to
continually deconstruct and reconstruct a music object just to perform
operations on one of the two main component parts.</p>
<p>You can split a music object into a list with
<code><a href="../reference/music.html">music_split()</a></code> or you can extract the relevant piece with
one of the other functions below.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/music.html">music_split</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; $notes</span></span>
<span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: c d e f g a b &lt;ceg~&gt; &lt;ceg&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $info</span></span>
<span><span class="co">#&gt; &lt;Note info string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: 8 8 8 8 8 8 8 8 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $lyrics</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $key</span></span>
<span><span class="co">#&gt; [1] "c"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $time</span></span>
<span><span class="co">#&gt; [1] "4/4"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tempo</span></span>
<span><span class="co">#&gt; [1] "2 = 60"</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/music-helpers.html">music_notes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: c d e f g a b &lt;ceg~&gt; &lt;ceg&gt;</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/music-helpers.html">music_info</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Note info string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: 8 8 8 8 8 8 8 8 1</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/music-helpers.html">music_key</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "c"</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/music-helpers.html">music_time</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "4/4"</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/music-helpers.html">music_tempo</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "2 = 60"</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="constructing-from-character">Constructing from character<a class="anchor" aria-label="anchor" href="#constructing-from-character"></a>
</h2>
<p>The real value is in building brand new music objects from a single
character string input. This method of music object construction allows
for relatively efficient data entry. There can potentially be a lot less
typing involved when directly entering music syntax for a new piece of
music if you do so with the music class rather than creating
<code>noteworthy</code> and <code>noteinfo</code> objects
separately.</p>
<p>This is also a good place to mention that like with
<code>noteworthy</code> and <code>noteinfo</code> strings, a handy
adjective can be used to check the validity of the music input.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"a,4*5 b,4- c4 cgc'e'~4 cgc'e'1 e'4 c' g c ce'1"</span></span>
<span><span class="fu"><a href="../reference/music.html">musical</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/music.html">as_music</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: a,4 a,4 a,4 a,4 a,4 b,4- c4 &lt;cgc'e'~&gt;4 &lt;cgc'e'&gt;1 e'4 c'4 g4 c4 &lt;ce'&gt;1</span></span></code></pre>
<div class="section level3">
<h3 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a>
</h3>
<p>Notice that each timestep remains space-delimited (vectors are also
allowed). At each timestep, the notes and the note info are bound
together unambiguously with no delimiter. This is why tick octave
numbering is required for music objects.</p>
<p>You can see that the expansion operator <code>*</code> is still
allowed and continues to be place at the right end of a timestep.</p>
<p>Do not forget that tied notes indicated with the <code>~</code> are
part of the note and not part of the note info! Order matters here.</p>
<p>You can also include rests <code>r</code> and silent rests
<code>s</code>.</p>
</div>
<div class="section level3">
<h3 id="other-efficiencies">Other efficiencies<a class="anchor" aria-label="anchor" href="#other-efficiencies"></a>
</h3>
<p>Another benefit to this approach for entering new data is that
durations are inferred from the previous timesteps if not provided. You
do not need to explicitly enter a duration value until there is a
change. This is not possible with <code>noteinfo</code> because it could
result in simply removing timesteps, but here there is always a note
entry present to mark each timestep.</p>
<p>This one is a bit of an aside, but if string numbers are provided for
a stringed and fretted instrument context (see example below), there is
also no need to specify more than the starting string number (lowest
pitch/highest number) unless there are non-consecutive strings. The
purpose of the <code>music</code> class is not transcription, but to
corral related data together for analysis.</p>
<p>However, music objects do lend themselves seamlessly to some
transcription tasks, which is why string numbering is allowed even
though it is not focused on. You can see an example here. It is the same
as above, but string numbers are indicated following a semicolon
delimiter. Like durations, string numbers also repeat silently. Any
inferred repeated information across timesteps carries over rests,
including string numbers. String numbers at a rest timestep are ignored
gracefully.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"a,4;5*5 b,4- c4 cgc'e'~4 cgc'e'1 e'4;2 c';3 g;4 c;5 ce'1;51"</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/music.html">as_music</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: a,4 a,4 a,4 a,4 a,4 b,4- c4 &lt;cgc'e'~&gt;4 &lt;cgc'e'&gt;1 e'4 c'4 g4 c4 &lt;ce'&gt;1</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/music-helpers.html">music_strings</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt;  [1] "5"    "5"    "5"    "5"    "5"    "5"    "5"    "5432" "5432" "2"   </span></span>
<span><span class="co">#&gt; [11] "3"    "4"    "5"    "51"</span></span></code></pre>
<p>Lyrics data returns as <code>NA</code> when requested if a lyrics
object was not provided during the construction of a music object. In
contrast, string number information is not represented in the object at
all if not provided when constructed, since it is not relevant to the
general purpose of the class and is only used for specific transcription
use cases.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Timesteps: 14 (11 notes, 3 chords)</span></span>
<span><span class="co">#&gt;   Octaves: tick</span></span>
<span><span class="co">#&gt;   Accidentals: flat</span></span>
<span><span class="co">#&gt;   Key signature: c</span></span>
<span><span class="co">#&gt;   Time signature: 4/4</span></span>
<span><span class="co">#&gt;   Tempo: 2 = 60</span></span>
<span><span class="co">#&gt;   Lyrics: NA</span></span>
<span><span class="co">#&gt;   Strings: 5 5 5 5 5 5 5 5432 5432 2...</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: a,4 a,4 a,4 a,4 a,4 b,4- c4 &lt;cgc'e'~&gt;4 &lt;cgc'e'&gt;1 e'4 c'4 g4 c4 &lt;ce'&gt;1</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/music.html">music_split</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; $notes</span></span>
<span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: a, a, a, a, a, b, c &lt;cgc'e'~&gt; &lt;cgc'e'&gt; e' c' g c &lt;ce'&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $info</span></span>
<span><span class="co">#&gt; &lt;Note info string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: 4 4 4 4 4 4- 4 4 1 4 4 4 4 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $string</span></span>
<span><span class="co">#&gt;  [1] "5"    "5"    "5"    "5"    "5"    "5"    "5"    "5432" "5432" "2"   </span></span>
<span><span class="co">#&gt; [11] "3"    "4"    "5"    "51"  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $lyrics</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $key</span></span>
<span><span class="co">#&gt; [1] "c"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $time</span></span>
<span><span class="co">#&gt; [1] "4/4"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tempo</span></span>
<span><span class="co">#&gt; [1] "2 = 60"</span></span></code></pre>
<p>As you can see above, the print statement does not change. But the
other functions above reveal that the additional information is now
contained in the music object.</p>
</div>
</div>
<div class="section level2">
<h2 id="working-with-music-objects">Working with music objects<a class="anchor" aria-label="anchor" href="#working-with-music-objects"></a>
</h2>
<p>While many functions that perform operations on noteworthy and note
info objects require those objects exclusively, meaning that you are
supposed to use functions like <code><a href="../reference/music-helpers.html">music_notes()</a></code> and
<code><a href="../reference/music-helpers.html">music_info()</a></code> to extract the given component from a music
object, there are several functions that are sensible to apply directly
to music objects.</p>
<p>First and foremost, the same generic methods are implemented for
music objects. Square bracket subsetting will even subset any lyrics or
string numbers that are present in the object, not just the notes and
note info.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: &lt;cgc'e'&gt;1 e'4 c'4 g4 c4 &lt;ce'&gt;1</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">8</span><span class="op">:</span><span class="fl">9</span><span class="op">]</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: &lt;cgc'e'~&gt;4 &lt;cgc'e'&gt;1</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">9</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">y</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: &lt;cgc'e'&gt;1 &lt;cgc'e'&gt;1 e'4 e'4</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/music-helpers.html">music_strings</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "5432" "5432" "2"    "2"</span></span></code></pre>
<p>There are several time functions that work nicely on music objects.
They were not introduced in the vignette on note info because they are
more relevant here. Most require the level of information contained in a
music object because they deal in real time such as seconds. This works
with music objects because they contain a tempo value. Note info objects
do not contain this level of information. They can be passed to
functions that require a tempo value, as long as you also pass a tempo
to any function with a <code>tempo</code> argument.</p>
<p>The example below is intended to be complex, including many changes
in note duration and other note info. There is not much to be gained by
writing it as a single string in this case. For clarity, it starts from
separate notes and note info. See the help documentation for more
examples and details.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/notate.html">notate</a></span><span class="op">(</span><span class="st">"t8x"</span>, <span class="st">"Start here"</span><span class="op">)</span></span>
<span><span class="va">notes</span> <span class="op">&lt;-</span> <span class="st">"a, b, c d e f g# a r ac'e' a c' e' c' r*3 ac'e'~ ac'e'"</span></span>
<span><span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">a</span>, <span class="st">"t8x t8-. 16 4.. 16- 16 2^ 2 4. 8( 4)( 4) 8*4 1 1"</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/music.html">as_music</a></span><span class="op">(</span><span class="va">notes</span>, <span class="va">info</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/n_measures.html">n_measures</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] 5.375</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/n_measures.html">n_beats</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] 21.5</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/n_measures.html">bpm</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] 120</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/n_measures.html">seconds</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] 10.75</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/n_measures.html">steps_per_measure</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span><span class="co">#&gt;   measure steps</span></span>
<span><span class="co">#&gt;     &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1       1     8</span></span>
<span><span class="co">#&gt; 2       2     2</span></span>
<span><span class="co">#&gt; 3       3     4</span></span>
<span><span class="co">#&gt; 4       4     4</span></span>
<span><span class="co">#&gt; 5       5     1</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/n_measures.html">seconds_per_measure</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] 2</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/n_measures.html">seconds_per_step</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt;  [1] 0.1666667 0.1666667 0.1666667 0.1250000 0.8750000 0.1250000 0.1250000</span></span>
<span><span class="co">#&gt;  [8] 1.0000000 1.0000000 0.7500000 0.2500000 0.5000000 0.5000000 0.2500000</span></span>
<span><span class="co">#&gt; [15] 0.2500000 0.2500000 0.2500000 2.0000000 2.0000000</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/n_measures.html">steps_start_time</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt;  [1] 0.0000000 0.1666667 0.3333333 0.5000000 0.6250000 1.5000000 1.6250000</span></span>
<span><span class="co">#&gt;  [8] 1.7500000 2.7500000 3.7500000 4.5000000 4.7500000 5.2500000 5.7500000</span></span>
<span><span class="co">#&gt; [15] 6.0000000 6.2500000 6.5000000 6.7500000 8.7500000</span></span></code></pre>
<p>You may notice above that the table returned by
<code><a href="../reference/n_measures.html">steps_per_measure()</a></code> containing the number of timesteps per
measure of music does not have an entry for measure six. There is a
measure six. You can see from <code><a href="../reference/n_measures.html">n_measures()</a></code> being greater
than five that a sixth measure does begin even if the duration of all
the time steps does not yield a complete sixth measure. The reason there
is no entry in the table is because this measure has no timesteps. The
final chord in the sequence lasts for a whole measure, beginning in
measure five and carrying over to six, but no timestep starts in
six.</p>
<p>Combining note info with a tempo is powerful because it allows you to
move from beats into real time. The music object is a convenient
structure for keeping sound and time together and splitting and
extracting parts of the object for independent computations is easy when
using the various supporting functions.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://github.com/leonawicz" class="external-link">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
