<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Phrase helpers • tabr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Phrase helpers">
<meta property="og:description" content="tabr">
<meta property="og:image" content="https://leonawicz.github.io/tabr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Programming</li>
    <li>
      <a href="../articles/tabr-prog-nw.html">Noteworthiness</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-scales.html">Musical scales</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-notes.html">Note functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-chords.html">Chord functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-noteinfo.html">Time and note info</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-music.html">The music class</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-converters.html">Syntax converters</a>
    </li>
    <li>
      <a href="../articles/tabr-fretboard.html">Fretboard diagram plots</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Transcription</li>
    <li>
      <a href="../articles/tabr-basics.html">Basic overview</a>
    </li>
    <li>
      <a href="../articles/tabr-phrases.html">Musical phrases</a>
    </li>
    <li>
      <a href="../articles/tabr-helpers.html">Phrase helpers</a>
    </li>
    <li>
      <a href="../articles/tabr-chords.html">Chords</a>
    </li>
    <li>
      <a href="../articles/tabr-repeats.html">Repeats</a>
    </li>
    <li>
      <a href="../articles/tabr-tracks-scores.html">Tracks and scores</a>
    </li>
    <li>
      <a href="../articles/tabr-engraving.html">Render scores</a>
    </li>
    <li>
      <a href="../articles/tabr-snippets.html">Music snippets</a>
    </li>
    <li>
      <a href="../articles/tabr-chordchart.html">Render chord chart</a>
    </li>
    <li>
      <a href="../articles/tabr-tunings.html">Strings and tunings</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tabr-ex1.html">Tuning and capo</a>
    </li>
    <li>
      <a href="../articles/tabr-ex2.html">Multiple voices</a>
    </li>
    <li>
      <a href="../articles/tabr-ex3.html">AC2 - Ezio's family</a>
    </li>
    <li>
      <a href="../articles/tabr-ex4.html">Gin Wigmore - Devil in me</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leonawicz/tabr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="tabr-helpers_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="tabr-helpers_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="tabr-helpers_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Phrase helpers</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/tabr/blob/master/vignettes/tabr-helpers.Rmd"><code>vignettes/tabr-helpers.Rmd</code></a></small>
      <div class="hidden name"><code>tabr-helpers.Rmd</code></div>

    </div>

    
    
<p>This section covers helper functions related to phrases. These functions assist with improving readability, organization, and limiting the amount of typing required to specify phrases where possible.</p>
<div id="aliases" class="section level2">
<h2 class="hasAnchor">
<a href="#aliases" class="anchor"></a>Aliases</h2>
<p>Briefly, there are some convenient aliases for <code>tabr</code> functions that are used often. These aliases have short function names to help keep the music notation R syntax a more concise if desired. These include:</p>
<ul>
<li>
<code>p</code>, an alias for <code>phrase</code>.</li>
<li>
<code>tp</code>, an alias for <code>transpose</code>.</li>
</ul>
<p>The most common conflicts to watch out for are using <code>tabr</code> with <code>shiny</code> where <code>p</code> is a function and if you use <code>purrr</code> to help wrangle some of your more complex tablature, it has its own <code>transpose</code> function. Pay attention to package load order and/or use explicit names spaces if working with these packages loaded. The recommended approach is to stick with <code>phrase</code> in apps where users will not see your code anyway and stick with <code>tp</code> for transposition in general.</p>
</div>
<div id="repeat-and-concatenate" class="section level2">
<h2 class="hasAnchor">
<a href="#repeat-and-concatenate" class="anchor"></a>Repeat and concatenate</h2>
<p>The previous section on phrases presented an opportunity to introduce <code>pn</code> for repeating strings and <code>pc</code> for joining them together. These were used on strings passed to <code>phrase</code> but work on any character string.</p>
<p>To recap, <code>pn</code>, is for repeating a phrase <code>n</code> times; is a simple wrapper around <code>rep</code> that maintains the <code>phrase</code> class when passed a phrase object and uses spaces when collapsing the repeated input. <code>pc</code> is a similar wrapper around <code>paste</code>. It can be passed an arbitrary number of input simple character strings or phrase objects. The <code>phrase</code> class is applied to the output as long as at least one input passed to <code>pc</code> is a phrase object. It is the responsibility of the user to ensure that in such a case a simple character string also represents valid phrase content so that the output phrase is valid.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="st">"c3 d3 e3"</span>, <span class="st">"f3 g3 a3"</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">3</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">3</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">3</span><span> </span><span style="color: #00BBBB;font-weight: bold;">f</span><span style="color: #00BBBB;">3</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">3</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a</span><span style="color: #00BBBB;">3</span><span>
</span></code></pre>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="st">"c3 d3 e3"</span>, <span class="fl">2</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">3</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">3</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">3</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">3</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">3</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">3</span><span>
</span></code></pre>
</div>
<div id="rests" class="section level2">
<h2 class="hasAnchor">
<a href="#rests" class="anchor"></a>Rests</h2>
<p>The <code>rest</code> function is a simple wrapper around <code>rep</code> much like <code>pn</code>. It is useful when you need to propagate a number of rests, perhaps not all of equal duration. It accepts two vectorized arguments. The first is the duration of the rest. The second is the number of times to repeat it.</p>
<p>For example, say a score has multiple tracks. During a certain period in the score, one track goes silent and needs to be carried over with a sequence of rests. Perhaps the instrument dropped out in the middle of a measure and returns in the middle of another, with several full measures in between. This can easily be notated using <code>pn</code> and <code>pc</code>, but it could be more convenient with <code>rest</code>, or at least offer more interpretable code if you prefer.</p>
<p>In this example, using <code>rest</code> is compared with writing out the full <code>notes</code> string as well as using some combinations of <code>pn</code> and <code>pc</code>. It is a matter of preference which approach you take and dependent on the content being repeated and pasted together. Note that using the terminal in-string multiplicative expansion operator, <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code>, in cases of many adjacent single-element repetitions, is by far the best option as far as shortening code is concerned. If this method is preferred, it essentially removes any edge case preference there may have been for <code>rest</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="st">"r8 r8 r8 r1 r1 r1 r1 r1 r1 r1 r1 r1 r1 r4."</span></pre></div>
<pre class="r-output"><code>#&gt; [1] "r8 r8 r8 r1 r1 r1 r1 r1 r1 r1 r1 r1 r1 r4."
</code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="st">"r8"</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="st">"r1"</span>, <span class="fl">10</span><span class="op">)</span>, <span class="st">"r4."</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; [1] "r8 r8 r8 r1 r1 r1 r1 r1 r1 r1 r1 r1 r1 r4."
</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="fu"><a href="../reference/rest.html">rest</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">1</span>, <span class="st">"4."</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; [1] "r8 r8 r8 r1 r1 r1 r1 r1 r1 r1 r1 r1 r1 r4."
</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="st">"r8*3 r1*10 r4."</span></pre></div>
<pre class="r-output"><code>#&gt; [1] "r8*3 r1*10 r4."
</code></pre>
</div>
<div id="ties" class="section level2">
<h2 class="hasAnchor">
<a href="#ties" class="anchor"></a>Ties</h2>
<p>Tied notes were introduced momentarily in the previous section on phrases. The example given showed that ties are denoted by appending the pitch letter of the note with <code><a href="https://rdrr.io/r/base/tilde.html">~</a></code> and this will create a tie in the output from this note to the next one.</p>
<p>This can be frustrating to type and to read when done for six-string chords for example. <code>tie</code> can make this more bearable. Chords receive further discussion in subsequent sections. They were shown briefly at the end of the last section so that space-delimited time and simultaneous notes could be demonstrated clearly. For now, this is enough to demonstrate <code>tie</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">em</span> <span class="op">&lt;-</span> <span class="st">"e,a,dgbe'"</span>
<span class="fu"><a href="../reference/tie.html">tie</a></span><span class="op">(</span><span class="va">em</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">,</span><span style="color: #BBBB00;">~</span><span style="color: #00BBBB;font-weight: bold;">a</span><span style="color: #00BBBB;">,</span><span style="color: #BBBB00;">~</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #BBBB00;">~</span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #BBBB00;">~</span><span style="color: #00BBBB;font-weight: bold;">b</span><span style="color: #BBBB00;">~</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">'</span><span style="color: #BBBB00;">~&gt;</span><span>
</span></code></pre>
</div>
<div id="hammer-onpull-off" class="section level2">
<h2 class="hasAnchor">
<a href="#hammer-onpull-off" class="anchor"></a>Hammer on/pull off</h2>
<p>There is a simple helper function, <code>hp</code>, for hammer ons and pull offs, or for slurs in general. Like several other helpers it is a wrapper around paste. It ensures slurs come in an even number so there is always a starting and stopping point and accepts several input styles.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="../reference/hp.html">hp</a></span><span class="op">(</span><span class="st">"16 16"</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; [1] "16( 16)"
</code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu"><a href="../reference/hp.html">hp</a></span><span class="op">(</span><span class="st">"16"</span>, <span class="st">"16"</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; [1] "16( 16)"
</code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="../reference/hp.html">hp</a></span><span class="op">(</span><span class="fl">16</span>, <span class="fl">16</span>, <span class="fl">8</span>, <span class="st">"2."</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; [1] "16( 16) 8( 2.)"
</code></pre>
<p>It is particularly useful for long runs of similar repeated hammer ons and/or pull offs that would be frustrating to type out directly.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="fu"><a href="../reference/hp.html">hp</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="st">"16 8"</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; [1] "16( 8) 16( 8) 16( 8) 16( 8) 16( 8) 16( 8) 16( 8) 16( 8)"
</code></pre>
</div>
<div id="transpose" class="section level2">
<h2 class="hasAnchor">
<a href="#transpose" class="anchor"></a>Transpose</h2>
<p>In the last section there was an example showing a sequence of notes followed by the same sequence transposed one octave up. At the time, it was written out twice. Here, the same sequence is reproduced using <code>transpose</code>. Transposing up one octave is done by specifying an increase of 12 semitones or half steps. Note that <code>transpose</code> drops the unnecessary <code>3</code>s for the third octave, the central octave in LilyPond. They are dropped from <code>note2</code> here</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="va">notes1</span> <span class="op">&lt;-</span> <span class="st">"c3 b2 c3 d3 e3 e3 d3 c3 b2 c3 c3 c4"</span>
<span class="va">notes2</span> <span class="op">&lt;-</span> <span class="st">"c4 b c4 d4 e4 e4 d4 c4 b c4 c4 c5"</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="fu"><a href="../reference/transpose.html">transpose</a></span><span class="op">(</span><span class="va">notes1</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="../reference/valid-notes.html">as_noteworthy</a></span><span class="op">(</span><span class="va">notes2</span><span class="op">)</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE
</code></pre>
<p>Transposing down is done with negative integers. The default (<code>n = 0</code>) returns the input, <code>x</code>, with no transposition. The alias <code>tp</code> can be used to limit typing. Examples are shown below.</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="fu"><a href="../reference/transpose.html">transpose</a></span><span class="op">(</span><span class="st">"a_3 b_4 c5"</span>, <span class="fl">0</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">a_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span style="color: #00BBBB;">4</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">5</span><span>
</span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a_3 b_4 c5"</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a</span><span style="color: #00BBBB;">4</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b</span><span style="color: #00BBBB;">4</span><span>
</span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a_3 b_4 c5"</span>, <span class="fl">1</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">a</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b</span><span style="color: #00BBBB;">4</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d_</span><span style="color: #00BBBB;">5</span><span>
</span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a#3 b4 c#5"</span>, <span class="fl">11</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">a</span><span style="color: #00BBBB;">4</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a#</span><span style="color: #00BBBB;">5</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">6</span><span>
</span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a#3 b4 c#5"</span>, <span class="fl">12</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">a#</span><span style="color: #00BBBB;">4</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b</span><span style="color: #00BBBB;">5</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c#</span><span style="color: #00BBBB;">6</span><span>
</span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a#3 b4 c#5"</span>, <span class="fl">13</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">b</span><span style="color: #00BBBB;">4</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">6</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">6</span><span>
</span></code></pre>
<p>If no other information is passed to <code>transpose</code>, positive <code>n</code> will sharpen naturals. Negative <code>n</code> will flatten naturals. This is not ideal because it may not fit a key signature. A standard key signature is composed of notes that may include flats or sharps but not both. To avoid simply defaulting to one or the other based on direction of transposition, specify they key signature with <code>key</code> to be formal, e.g. <code>key = "dm"</code>, or just specify <code>"flat"</code> or <code>"sharp"</code>" because this is really all that is needed.</p>
<p>Since <code>notes</code> can be arbitrarily short, even a single note, there is no reason for <code>transpose</code> to attempt to guess the original or new key from the notes present and degree of transposition. <code>notes</code> may easily include accidentals anyhow. <code>transpose</code> works with either integer or tick style octave numbering as shown below and the the output <code>style</code> can be forced either way.</p>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a3 b4 c5"</span>, <span class="fl">2</span>, key <span class="op">=</span> <span class="st">"f"</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">b</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d_</span><span style="color: #00BBBB;">5</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">5</span><span>
</span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit">
<span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a3 b4 c5"</span>, <span class="fl">2</span>, octaves <span class="op">=</span> <span class="st">"tick"</span>, key <span class="op">=</span> <span class="st">"g"</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">b</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c#</span><span style="color: #00BBBB;">''</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">''</span><span>
</span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit">
<span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a b' c''"</span>, <span class="fl">2</span>, accidentals <span class="op">=</span> <span class="st">"flat"</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">b</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d_</span><span style="color: #00BBBB;">''</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">''</span><span>
</span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit">
<span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a, b c'"</span>, <span class="fl">2</span>, octaves <span class="op">=</span> <span class="st">"integer"</span>, accidentals <span class="op">=</span> <span class="st">"sharp"</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">b</span><span style="color: #00BBBB;">2</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c#</span><span style="color: #00BBBB;">4</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">4</span><span>
</span></code></pre>
<p>The key of F has one flat (B flat) and the key of G has one sharp (F sharp). Transposing the above notes up by a whole step (two semitones or half steps) results in a new note sequence that includes either a D flat or C sharp for the second note. This pitch does not occur (except as an accidental) in either of those keys.</p>
<p>Nevertheless, because F is a key with some number of sharps and G is a key with some number of flats, transpositions resulting in any non-natural notes are represented as flats and sharps, respectively. The key of C major and its relative A minor have only natural notes. Setting <code>key "c"</code> or <code>key = "am"</code> results in the default behavior, falling back on sharp notes for transposing up and flat notes for transposing down.</p>
</div>
<div id="tuplets" class="section level2">
<h2 class="hasAnchor">
<a href="#tuplets" class="anchor"></a>Tuplets</h2>
<p>An important feature is the tuplet. This will evenly fit a sequence of notes into a number of beats not otherwise permitted by the time signature. The most common and default tuplet returned by <code>tuplet</code> is the triplet. There is also an alias function, <code>triplet</code> for this. The triplet fits three equally spaced notes into two beats that would normally be taken up by two of those notes, meaning each note in the triplet lasts for two thirds the normal duration. The examples below show the equivalence of default <code>tuplet</code> settings and <code>triplet</code> as well as other specifications for <code>tuplet</code> and the ability to specify multiple consecutive tuplets of a fixed pattern with a single call to <code>tuplet</code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"c4 d4 e4"</span>
<span class="fu"><a href="../reference/tuplet.html">tuplet</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">8</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;">&lt;</span><span style="color: #555555;font-weight: bold;">Musical phrase</span><span style="color: #555555;">&gt;</span><span>
#&gt; </span><span style="color: #BBBB00;">\tuplet 3/2 4 {</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">8</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; </span><span style="color: #BBBB00;">}</span><span>
</span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit">
<span class="fu"><a href="../reference/tuplet.html">triplet</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">8</span><span class="op">)</span> <span class="co"># equivalent</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;">&lt;</span><span style="color: #555555;font-weight: bold;">Musical phrase</span><span style="color: #555555;">&gt;</span><span>
#&gt; </span><span style="color: #BBBB00;">\tuplet 3/2 4 {</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">8</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; </span><span style="color: #BBBB00;">}</span><span>
</span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit">
<span class="fu"><a href="../reference/tuplet.html">tuplet</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">8</span>, a <span class="op">=</span> <span class="fl">6</span>, b <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="co"># 6 notes per 4 beats</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;">&lt;</span><span style="color: #555555;font-weight: bold;">Musical phrase</span><span style="color: #555555;">&gt;</span><span>
#&gt; </span><span style="color: #BBBB00;">\tuplet 6/4 2 {</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">8</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; </span><span style="color: #BBBB00;">}</span><span>
</span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit">
<span class="fu"><a href="../reference/tuplet.html">tuplet</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fl">8</span><span class="op">)</span> <span class="co"># multiple tuplets, one call</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;">&lt;</span><span style="color: #555555;font-weight: bold;">Musical phrase</span><span style="color: #555555;">&gt;</span><span>
#&gt; </span><span style="color: #BBBB00;">\tuplet 3/2 4 {</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">8</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; &lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">'</span><span style="color: #555555;">&gt; </span><span style="color: #BBBB00;">}</span><span>
</span></code></pre>
<p>Like <code>phrase</code>, these functions accept a <code>string</code> number argument, which is critical as usual for guitar tablature (try engraving the final phrase below without explicit string numbers and see the mess you get). This example includes some rests.</p>
<div class="sourceCode" id="cb27"><pre class="downlit">
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="fu"><a href="../reference/tuplet.html">triplet</a></span><span class="op">(</span><span class="st">"c4 r e4"</span>, <span class="fl">8</span>, <span class="st">"4 3 3"</span><span class="op">)</span>, 
  <span class="fu"><a href="../reference/tuplet.html">tuplet</a></span><span class="op">(</span><span class="st">"f4 g4 a4 b4 c5 b4"</span>, <span class="fl">8</span>, <span class="st">"3 2 2 1 1 1"</span>, <span class="fl">6</span>, <span class="fl">4</span><span class="op">)</span>, 
  <span class="fu"><a href="../reference/tuplet.html">tuplet</a></span><span class="op">(</span><span class="st">"a4 r f4 g4 r e4 f4 e4 d4 e4 d4 c4"</span>, <span class="fl">16</span>, <span class="st">"2 2 3 2 3*7 4"</span><span class="op">)</span>,
  <span class="fu"><a href="../reference/tuplet.html">tuplet</a></span><span class="op">(</span><span class="st">"b a g f e"</span>, <span class="fl">16</span>, <span class="st">"4 4 5*3"</span>, <span class="fl">5</span>, <span class="fl">4</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="../reference/track.html">track</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">p1</span>, <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"d c"</span>, <span class="st">"8 4."</span>, <span class="st">"6 6"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="va">score</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/tab.html">tab</a></span><span class="op">(</span><span class="st">"ex12.pdf"</span><span class="op">)</span></pre></div>
<p>
<img src="https://github.com/leonawicz/tabr/blob/master/data-raw/vignette-pngs/ex12.png?raw=true" class="centerimg" width="100%"></p>
<p>By itself <code>triplet</code> is of limited utility. Notice that it does not allow any additional note info to be included. If you have more note info, <code>phrase</code> now supports triplets directly (not general tuplets though). It is recommended to provide note info to <code>phrase</code> that uses the <code>t</code>-prefix triplet notation, e.g., <code>"t8"</code>. Notes and chords with this triplet timing will be parsed into LilyPond triplet syntax like above, but also retaining other note info.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/leonawicz">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
