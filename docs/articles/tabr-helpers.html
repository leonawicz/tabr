<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Phrase helpers • tabr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Phrase helpers">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tabr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Home</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><h6 class="dropdown-header" data-toc-skip>Programming</h6></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-nw.html">Noteworthiness</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-scales.html">Musical scales</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-notes.html">Note functions</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-chords.html">Chord functions</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-noteinfo.html">Time and note info</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-music.html">The music class</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-converters.html">Syntax converters</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-fretboard.html">Fretboard diagram plots</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Transcription</h6></li>
    <li><a class="dropdown-item" href="../articles/tabr-basics.html">Basic overview</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-phrases.html">Musical phrases</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-helpers.html">Phrase helpers</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-chords.html">Chords</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-repeats.html">Repeats</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-tracks-scores.html">Tracks and scores</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-engraving.html">Render scores</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-snippets.html">Music snippets</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-chordchart.html">Render chord chart</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-tunings.html">Strings and tunings</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/tabr-ex1.html">Tuning and capo</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-ex2.html">Multiple voices</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-ex3.html">AC2 - Ezio's family</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-ex4.html">Gin Wigmore - Devil in me</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/leonawicz/tabr"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Phrase helpers</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/tabr/blob/HEAD/vignettes/tabr-helpers.Rmd" class="external-link"><code>vignettes/tabr-helpers.Rmd</code></a></small>
      <div class="d-none name"><code>tabr-helpers.Rmd</code></div>
    </div>

    
    
<p>This section covers helper functions related to phrases. These
functions assist with improving readability, organization, and limiting
the amount of typing required to specify phrases where possible.</p>
<div class="section level2">
<h2 id="aliases">Aliases<a class="anchor" aria-label="anchor" href="#aliases"></a>
</h2>
<p>Briefly, there are some convenient aliases for <code>tabr</code>
functions that are used often. These aliases have short function names
to help keep the music notation R syntax a more concise if desired.
These include:</p>
<ul>
<li>
<code><a href="../reference/phrase.html">p()</a></code>, an alias for <code><a href="../reference/phrase.html">phrase()</a></code>.</li>
<li>
<code><a href="../reference/transpose.html">tp()</a></code>, an alias for <code><a href="../reference/transpose.html">transpose()</a></code>.</li>
</ul>
<p>The most common conflicts to watch out for are using
<code>tabr</code> with <code>shiny</code> where <code><a href="../reference/phrase.html">p()</a></code> is a
function and if you use <code>purrr</code> to help wrangle some of your
more complex tablature, it has its own <code><a href="../reference/transpose.html">transpose()</a></code>
function. Pay attention to package load order and/or use explicit names
spaces if working with these packages loaded.</p>
</div>
<div class="section level2">
<h2 id="repeat-and-concatenate">Repeat and concatenate<a class="anchor" aria-label="anchor" href="#repeat-and-concatenate"></a>
</h2>
<p>The previous section on phrases presented an opportunity to introduce
<code><a href="../reference/append_phrases.html">pn()</a></code> for repeating strings and <code><a href="../reference/append_phrases.html">pc()</a></code> for
joining them together. These were used on strings passed to
<code><a href="../reference/phrase.html">phrase()</a></code> but work on any character string.</p>
<p>To recap, <code><a href="../reference/append_phrases.html">pn()</a></code>, is for repeating a phrase <code>n</code>
times; is a simple wrapper around <code><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep()</a></code> that maintains the
<code>phrase</code> class when passed a phrase object and uses spaces
when collapsing the repeated input. <code><a href="../reference/append_phrases.html">pc()</a></code> is a similar
wrapper around <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>. It can be passed an arbitrary
number of input simple character strings or phrase objects. The
<code>phrase</code> class is applied to the output as long as at least
one input passed to <code><a href="../reference/append_phrases.html">pc()</a></code> is a phrase object. It is the
responsibility of the user to ensure that in such a case a simple
character string also represents valid phrase content so that the output
phrase is valid.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="st">"c d e"</span>, <span class="st">"f g a"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: c d e f g a</span></span></code></pre>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="st">"c d e"</span>, <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: c d e c d e</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="rests">Rests<a class="anchor" aria-label="anchor" href="#rests"></a>
</h2>
<p>The <code><a href="../reference/rest.html">rest()</a></code> function is a simple wrapper around
<code><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep()</a></code> much like <code><a href="../reference/append_phrases.html">pn()</a></code>. It is useful when you
need to propagate a number of rests, perhaps not all of equal duration.
It accepts two vectorized arguments. The first is the duration of the
rest. The second is the number of times to repeat it.</p>
<p>For example, say a score has multiple tracks. During a certain period
in the score, one track goes silent and needs to be carried over with a
sequence of rests. Perhaps the instrument dropped out in the middle of a
measure and returns in the middle of another, with several full measures
in between. This can easily be notated using <code><a href="../reference/append_phrases.html">pn()</a></code> and
<code><a href="../reference/append_phrases.html">pc()</a></code>, but it could be more convenient with
<code><a href="../reference/rest.html">rest()</a></code>, or at least offer more interpretable code if you
prefer.</p>
<p>In this example, using <code><a href="../reference/rest.html">rest()</a></code> is compared with writing
out the full <code>notes</code> string as well as using some
combinations of <code><a href="../reference/append_phrases.html">pn()</a></code> and <code><a href="../reference/append_phrases.html">pc()</a></code>. It is a matter
of preference which approach you take and dependent on the content being
repeated and pasted together. Note that using the terminal in-string
multiplicative expansion operator, <code>*</code>, in cases of many
adjacent single-element repetitions, is by far the best option as far as
shortening code is concerned. If this method is preferred, it
essentially removes any edge case preference there may have been for
<code><a href="../reference/rest.html">rest()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"r8 r8 r8 r1 r1 r1 r1 r1 r1 r1 r1 r1 r1 r4."</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "r8 r8 r8 r1 r1 r1 r1 r1 r1 r1 r1 r1 r1 r4."</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="st">"r8"</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="st">"r1"</span>, <span class="fl">10</span><span class="op">)</span>, <span class="st">"r4."</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "r8 r8 r8 r1 r1 r1 r1 r1 r1 r1 r1 r1 r1 r4."</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rest.html">rest</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">1</span>, <span class="st">"4."</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "r8 r8 r8 r1 r1 r1 r1 r1 r1 r1 r1 r1 r1 r4."</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"r8*3 r1*10 r4."</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "r8*3 r1*10 r4."</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="ties">Ties<a class="anchor" aria-label="anchor" href="#ties"></a>
</h2>
<p>Tied notes were introduced momentarily in the previous section on
phrases. The example given showed that ties are denoted by appending the
pitch letter of the note with <code>~</code> and this will create a tie
in the output from this note to the next one.</p>
<p>This can be frustrating to type and to read when done for six-string
chords for example. <code><a href="../reference/tie.html">tie()</a></code> can make this more bearable.
Chords receive further discussion in subsequent sections. They were
shown briefly at the end of the last section so that space-delimited
time and simultaneous notes could be demonstrated clearly. For now, this
is enough to demonstrate <code><a href="../reference/tie.html">tie()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">em</span> <span class="op">&lt;-</span> <span class="st">"e,a,dgbe'"</span></span>
<span><span class="fu"><a href="../reference/tie.html">tie</a></span><span class="op">(</span><span class="va">em</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: &lt;e,~a,~d~g~b~e'~&gt;</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="hammer-onpull-off">Hammer on/pull off<a class="anchor" aria-label="anchor" href="#hammer-onpull-off"></a>
</h2>
<p>There is a simple helper function, <code><a href="../reference/hp.html">hp()</a></code>, for hammer ons
and pull offs, or for slurs in general. Like several other helpers it is
a wrapper around paste. It ensures slurs come in an even number so there
is always a starting and stopping point and accepts several input
styles.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hp.html">hp</a></span><span class="op">(</span><span class="st">"16 16"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "16( 16)"</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hp.html">hp</a></span><span class="op">(</span><span class="st">"16"</span>, <span class="st">"16"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "16( 16)"</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hp.html">hp</a></span><span class="op">(</span><span class="fl">16</span>, <span class="fl">16</span>, <span class="fl">8</span>, <span class="st">"2."</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "16( 16) 8( 2.)"</span></span></code></pre>
<p>It is particularly useful for long runs of similar repeated hammer
ons and/or pull offs that would be frustrating to type out directly.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hp.html">hp</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="st">"16 8"</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] "16( 8) 16( 8) 16( 8) 16( 8) 16( 8) 16( 8) 16( 8) 16( 8)"</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="transpose">Transpose<a class="anchor" aria-label="anchor" href="#transpose"></a>
</h2>
<p>In the last section there was an example showing a sequence of notes
followed by the same sequence transposed one octave up. At the time, it
was written out twice. Here, the same sequence is reproduced using
<code><a href="../reference/transpose.html">transpose()</a></code>. Transposing up one octave is done by
specifying an increase of 12 semitones or half steps.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">notes1</span> <span class="op">&lt;-</span> <span class="st">"c b, c d e e d c b, c c c'"</span></span>
<span><span class="va">notes2</span> <span class="op">&lt;-</span> <span class="st">"c' b c' d' e' e' d' c' b c' c' c''"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu"><a href="../reference/transpose.html">transpose</a></span><span class="op">(</span><span class="va">notes1</span>, <span class="fl">12</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="../reference/valid-notes.html">as_noteworthy</a></span><span class="op">(</span><span class="va">notes2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; [1] TRUE</span></span></code></pre>
<p>Transposing down is done with negative integers. The default
(<code>n = 0</code>) returns the input, <code>x</code>, with no
transposition. The alias <code><a href="../reference/transpose.html">tp()</a></code> can be used to limit typing.
Examples are shown below.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transpose.html">transpose</a></span><span class="op">(</span><span class="st">"a_ b_' c''"</span>, <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: a_ b_' c''</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a_ b_' c'"</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: g a' b</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a_ b_' c'"</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: a b' d_'</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a# b' c#'"</span>, <span class="fl">11</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: a' a#'' c''</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a# b' c#'"</span>, <span class="fl">12</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: a#' b'' c#''</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a# b' c#'"</span>, <span class="fl">13</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: b' c''' d''</span></span></code></pre>
<p>If no other information is passed to <code><a href="../reference/transpose.html">transpose()</a></code>,
positive <code>n</code> will sharpen naturals. Negative <code>n</code>
will flatten naturals. This is not ideal because it may not fit a key
signature. A standard key signature is composed of notes that may
include flats or sharps but not both. To avoid simply defaulting to one
or the other based on direction of transposition, specify they key
signature with <code>key</code> to be formal,
e.g. <code>key = "dm"</code>, or just specify <code>"flat"</code> or
<code>"sharp"</code>” because this is really all that is needed.</p>
<p>Since <code>notes</code> can be arbitrarily short, even a single
note, there is no reason for <code><a href="../reference/transpose.html">transpose()</a></code> to attempt to
guess the original or new key from the notes present and degree of
transposition. <code>notes</code> may easily include accidentals anyhow.
<code><a href="../reference/transpose.html">transpose()</a></code> works with either integer or tick style octave
numbering as shown below and the output <code>style</code> can be forced
either way.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a3 b4 c5"</span>, <span class="fl">2</span>, key <span class="op">=</span> <span class="st">"f"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: b d_5 d5</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a3 b4 c5"</span>, <span class="fl">2</span>, octaves <span class="op">=</span> <span class="st">"tick"</span>, key <span class="op">=</span> <span class="st">"g"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: b c#'' d''</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a b' c''"</span>, <span class="fl">2</span>, accidentals <span class="op">=</span> <span class="st">"flat"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: b d_'' d''</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="st">"a, b c'"</span>, <span class="fl">2</span>, octaves <span class="op">=</span> <span class="st">"integer"</span>, accidentals <span class="op">=</span> <span class="st">"sharp"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Noteworthy string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: b2 c#4 d4</span></span></code></pre>
<p>The key of F has one flat (B flat) and the key of G has one sharp (F
sharp). Transposing the above notes up by a whole step (two semitones or
half steps) results in a new note sequence that includes either a D flat
or C sharp for the second note. This pitch does not occur (except as an
accidental) in either of those keys.</p>
<p>Nevertheless, because F is a key with some number of sharps and G is
a key with some number of flats, transpositions resulting in any
non-natural notes are represented as flats and sharps, respectively. The
key of C major and its relative A minor have only natural notes. Setting
<code>key "c"</code> or <code>key = "am"</code> results in the default
behavior, falling back on sharp notes for transposing up and flat notes
for transposing down.</p>
</div>
<div class="section level2">
<h2 id="tuplets">Tuplets<a class="anchor" aria-label="anchor" href="#tuplets"></a>
</h2>
<p>An important feature is the tuplet. This will evenly fit a sequence
of notes into a number of beats not otherwise permitted by the time
signature. The most common and default tuplet returned by
<code><a href="../reference/tuplet.html">tuplet()</a></code> is the triplet. There is also an alias function,
<code><a href="../reference/tuplet.html">triplet()</a></code> for this. The triplet fits three equally spaced
notes into two beats that would normally be taken up by two of those
notes, meaning each note in the triplet lasts for two thirds the normal
duration. The examples below show the equivalence of default
<code><a href="../reference/tuplet.html">tuplet()</a></code> settings and <code><a href="../reference/tuplet.html">triplet()</a></code> as well as
other specifications for <code>tuplet</code> and the ability to specify
multiple consecutive tuplets of a fixed pattern with a single call to
<code><a href="../reference/tuplet.html">tuplet()</a></code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"c' d' e'"</span></span>
<span><span class="fu"><a href="../reference/tuplet.html">tuplet</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Musical phrase&gt;</span></span>
<span><span class="co">#&gt; \tuplet 3/2 4 { &lt;c'&gt;8 &lt;d'&gt; &lt;e'&gt; }</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tuplet.html">triplet</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">8</span><span class="op">)</span> <span class="co"># equivalent</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Musical phrase&gt;</span></span>
<span><span class="co">#&gt; \tuplet 3/2 4 { &lt;c'&gt;8 &lt;d'&gt; &lt;e'&gt; }</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tuplet.html">tuplet</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">8</span>, a <span class="op">=</span> <span class="fl">6</span>, b <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="co"># 6 notes per 4 beats</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Musical phrase&gt;</span></span>
<span><span class="co">#&gt; \tuplet 6/4 2 { &lt;c'&gt;8 &lt;d'&gt; &lt;e'&gt; &lt;c'&gt; &lt;d'&gt; &lt;e'&gt; }</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tuplet.html">tuplet</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fl">8</span><span class="op">)</span> <span class="co"># multiple tuplets, one call</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Musical phrase&gt;</span></span>
<span><span class="co">#&gt; \tuplet 3/2 4 { &lt;c'&gt;8 &lt;d'&gt; &lt;e'&gt; &lt;c'&gt; &lt;d'&gt; &lt;e'&gt; &lt;c'&gt; &lt;d'&gt; &lt;e'&gt; &lt;c'&gt; &lt;d'&gt; &lt;e'&gt; }</span></span></code></pre>
<p>Like <code><a href="../reference/phrase.html">phrase()</a></code>, these functions accept a
<code>string</code> number argument, which is critical as usual for
guitar tablature (try engraving the final phrase below without explicit
string numbers and see the mess you get). This example includes some
rests.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>  <span class="fu">triplet</span>(<span class="st">"c' r e'"</span>, <span class="dv">8</span>, <span class="st">"4 3 3"</span>), </span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>  <span class="fu">tuplet</span>(<span class="st">"f' g' a' b' c'' b'"</span>, <span class="dv">8</span>, <span class="st">"3 2 2 1 1 1"</span>, <span class="dv">6</span>, <span class="dv">4</span>), </span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>  <span class="fu">tuplet</span>(<span class="st">"a' r f' g' r e' f' e' d' e' d' c'"</span>, <span class="dv">16</span>, <span class="st">"2 2 3 2 3*7 4"</span>),</span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>  <span class="fu">tuplet</span>(<span class="st">"b a g f e"</span>, <span class="dv">16</span>, <span class="st">"4 4 5*3"</span>, <span class="dv">5</span>, <span class="dv">4</span>)</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a>)</span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a><span class="fu">track</span>(<span class="fu">pc</span>(p1, <span class="fu">p</span>(<span class="st">"d c"</span>, <span class="st">"8 4."</span>, <span class="st">"6 6"</span>))) <span class="sc">|&gt;</span> score <span class="sc">|&gt;</span> <span class="fu">tab</span>(<span class="st">"ex12.pdf"</span>)</span></code></pre></div>
<p>
<img src="https://github.com/leonawicz/tabr/blob/master/data-raw/vignette-pngs/ex12.png?raw=true" class="centerimg" width="100%"></p>
<p>By itself <code><a href="../reference/tuplet.html">triplet()</a></code> is of limited utility. Notice that
it does not allow any additional note info to be included. If you have
more note info, <code><a href="../reference/phrase.html">phrase()</a></code> supports triplets directly (not
general tuplets though). It is recommended to provide note info to
<code><a href="../reference/phrase.html">phrase()</a></code> that uses the <code>t</code>-prefix triplet
notation, e.g., <code>"t8"</code>. Notes and chords with this triplet
timing will be parsed into LilyPond triplet syntax like above, but also
retaining other note info.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/leonawicz" class="external-link">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
