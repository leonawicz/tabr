<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example: AC2 - Ezio's family • tabr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Example: AC2 - Ezio's family">
<meta property="og:description" content="tabr">
<meta property="og:image" content="https://leonawicz.github.io/tabr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Programming</li>
    <li>
      <a href="../articles/tabr-prog-nw.html">Noteworthiness</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-scales.html">Musical scales</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-notes.html">Note functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-chords.html">Chord functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-noteinfo.html">Time and note info</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-music.html">The music class</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-converters.html">Syntax converters</a>
    </li>
    <li>
      <a href="../articles/tabr-fretboard.html">Fretboard diagram plots</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Transcription</li>
    <li>
      <a href="../articles/tabr-basics.html">Basic overview</a>
    </li>
    <li>
      <a href="../articles/tabr-phrases.html">Musical phrases</a>
    </li>
    <li>
      <a href="../articles/tabr-helpers.html">Phrase helpers</a>
    </li>
    <li>
      <a href="../articles/tabr-chords.html">Chords</a>
    </li>
    <li>
      <a href="../articles/tabr-repeats.html">Repeats</a>
    </li>
    <li>
      <a href="../articles/tabr-tracks-scores.html">Tracks and scores</a>
    </li>
    <li>
      <a href="../articles/tabr-engraving.html">Render scores</a>
    </li>
    <li>
      <a href="../articles/tabr-snippets.html">Music snippets</a>
    </li>
    <li>
      <a href="../articles/tabr-chordchart.html">Render chord chart</a>
    </li>
    <li>
      <a href="../articles/tabr-tunings.html">Strings and tunings</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tabr-ex1.html">Tuning and capo</a>
    </li>
    <li>
      <a href="../articles/tabr-ex2.html">Multiple voices</a>
    </li>
    <li>
      <a href="../articles/tabr-ex3.html">AC2 - Ezio's family</a>
    </li>
    <li>
      <a href="../articles/tabr-ex4.html">Gin Wigmore - Devil in me</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leonawicz/tabr">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="tabr-ex3_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Example: AC2 - Ezio’s family</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/tabr/blob/master/vignettes/tabr-ex3.Rmd"><code>vignettes/tabr-ex3.Rmd</code></a></small>
      <div class="hidden name"><code>tabr-ex3.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>This coding example demonstrates the creation of a complete, two-guitar acoustic arrangement of <em>Ezio’s family</em>, the main theme from <em>Assassin’s Creed 2</em>, for educational purposes. This arrangement combines a fingerstyle arrangement, which suffices on its own, with an optional additional supporting rhythm guitar track.</p>
<p>In this example, the fingerstyle guitar would be easier to code as a single voice, but it is split into two voices because this is more accurate and commonly how it would be transcribed. This creates a bit more work and introduces more possibility for coding mistakes, but the purpose of this example is to demonstrate how to do these things.</p>
<p>The track played by the first guitar is also coded using the standard approach in <code>tabr</code>, which is to type out explicit pitches. However, for contrast the second guitar track has its phrases typed out using the alternative string-fret approach. This is not what <code>tabr</code> is meant for. It is minimally supported because it is the most likely approach to be used by casual users. While this approach can be quite convenient, it is also a big part of what leads to a lot of lazy, incomplete, ambiguous, error-prone tabbing of songs littered across the internet. It is oddly inconsistent to use both approaches in one score, but this is for example purposes.</p>
<p>First, enter some score metadata:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">header</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  title <span class="op">=</span> <span class="st">"Ezio's family"</span>,
  composer <span class="op">=</span> <span class="st">"Written by Jesper Kyd"</span>,
  subtitle <span class="op">=</span> <span class="st">"Theme from Assassin's Creed 2"</span>,
  arranger <span class="op">=</span> <span class="st">"Arranged by Matthew Leonawicz"</span>,
  copyright <span class="op">=</span> <span class="st">"2009 Ubisoft Entertainment"</span>,
  tagline <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Arranged by Matthew Leonawicz"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">txt</span> <span class="op">&lt;-</span> <span class="st">"Tune down full step: DGCFAD (Dm). Let guitar 1 ring."</span>
<span class="va">outfile</span> <span class="op">&lt;-</span> <span class="st">"jesper_kyd-ezios_family-custom_arrangement.pdf"</span></code></pre></div>
</div>
<div id="guitar-1-voice-1" class="section level2">
<h2 class="hasAnchor">
<a href="#guitar-1-voice-1" class="anchor"></a>Guitar 1 voice 1</h2>
<p>The main fingerstyle guitar track is split into two voices. Voice 1 is the top melody played using the fingers and voice 2 is played using the thumb.</p>
<p>First, define some string number sequences and note sequences that will be used often in this fairly repetitive track. There is no way to make the work short and easy, but the less you have to type the better.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">s1</span> <span class="op">&lt;-</span> <span class="st">"1 3 2 3 1 2 3 2"</span>
<span class="va">s2</span> <span class="op">&lt;-</span> <span class="st">"1 3 2 3 2 3 1 2"</span>
<span class="va">s3</span> <span class="op">&lt;-</span> <span class="st">"x 3 2 3 1 2 3 2"</span>

<span class="va">x1</span> <span class="op">&lt;-</span> <span class="st">"e4 g b g g4 b g b a4 g b g b4 b g b"</span>
<span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"b4"</span>, <span class="st">"g4"</span>, <span class="va">x1</span><span class="op">)</span></code></pre></div>
<p>The first few phrases are not too bad. They can be built largely with the building blocks set up above. And additional string of notes is introduced, along with and alternate ending <code>e2</code> to a <code>volta</code> repeat section.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p1a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span><span class="op">)</span>, <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="fu"><a href="../reference/notate.html">notate</a></span><span class="op">(</span><span class="st">"8"</span>, <span class="va">txt</span><span class="op">)</span>, <span class="st">"8*31"</span><span class="op">)</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">s1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span><span class="op">)</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">s1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e4 g b g b4 b g b a4 g b g b4 b g b"</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">s1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>

<span class="va">e2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e5 g b g f#5 b g b g5 g b g a5 b g b"</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">s1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="va">x2</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">s1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, <span class="va">e2</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">p1</span>, <span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span>, <span class="va">x1</span><span class="op">)</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">s1</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>, <span class="fl">1</span>, <span class="va">e</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Things become more complex with the next phrases. These use longer sequences of notes. <code>p5</code> also relies on a helper function just to shorten the typing a bit. It is worth looking for opportunities to avoid typing anything highly redundant. You should also only type out phrases to a length you are comfortable working with. A misplaced note can ruin everything and if you make your phrases too long to troubleshoot easily, you will become unhappy with your decision.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span>
    <span class="st">"b5 g b g b4 b g b e5 g b g b g b4 b s g b g b4 b g b c5 g b g b g b4 b"</span>,
    <span class="st">"s g b g a4 b g b b4 g b g b g a4 b s g b g b4 b g b s g g4 g a4 g b4 g"</span><span class="op">)</span>, <span class="fl">8</span>,
    <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">s1</span>, <span class="va">s2</span>, <span class="va">s3</span>, <span class="va">s2</span>, <span class="va">s3</span>, <span class="va">s2</span>, <span class="va">s3</span>, <span class="st">"x 3 1 3 1 3 1 3"</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu"><a href="../reference/repeats.html">rp</a></span><span class="op">(</span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"c5 g b g b4 b g b"</span>, <span class="fl">8</span>, <span class="va">s1</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"s g b g b4 b g b e5 g b g b4 b g b s g b g c5 b g b g5 g b g e5 b g b s g b g e5 b g b b4 g b g g4 g f#4 g"</span>, <span class="fl">8</span>,
    <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">s3</span>, <span class="va">s1</span>, <span class="va">s3</span>, <span class="va">s1</span>, <span class="va">s3</span>, <span class="st">"1 3 2 3 1 3 1 3"</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"g b g"</span>, <span class="va">x</span>, <span class="st">"b g b s g b g"</span>, <span class="va">x</span>, <span class="st">"b g b"</span><span class="op">)</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">s1</span>, <span class="va">s3</span><span class="op">)</span><span class="op">)</span>
<span class="va">p5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="va">p1</span>,
  <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e4 g b g b4 b g b c5 g b g b4 b g b e4 g b g g4 b g b b4 g c5 b g4 g b4 b"</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">s1</span>, <span class="va">s1</span>, <span class="va">s1</span>, <span class="st">"1 3 1 2 1 3 1 2"</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e4 g b g b4 b g b4 c5 g b g c5 b g b b4 g b g b4 b g b a4 g b g b4 b g b"</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="st">"1 3 2 3 1 2 3 1"</span>, <span class="va">s1</span>, <span class="va">s1</span>, <span class="va">s1</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="va">x1</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">s1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"c5 g b g b4 b g b s g b g b4 b g b"</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">s1</span>, <span class="va">s3</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu">f</span><span class="op">(</span><span class="st">"c5"</span><span class="op">)</span>, <span class="fu">f</span><span class="op">(</span><span class="st">"e5"</span><span class="op">)</span>, <span class="fu">f</span><span class="op">(</span><span class="st">"g5"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>Phrases, or song parts, depending on what you want to call these slices of music notation, six through ten are built from more predefined component parts:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span>, <span class="va">p1</span>, <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="va">x1</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">s1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, <span class="va">e2</span><span class="op">)</span>
<span class="va">p7</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"e4|g4"</span>, <span class="st">"b4"</span>, <span class="va">x1</span><span class="op">)</span>, <span class="va">x2</span><span class="op">)</span>, <span class="fl">12</span>, key <span class="op">=</span> <span class="st">"em"</span><span class="op">)</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">s1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="fu"><a href="../reference/transpose.html">tp</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span><span class="op">)</span>, <span class="fl">12</span>, key <span class="op">=</span> <span class="st">"em"</span><span class="op">)</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">s1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">p8</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">p1</span><span class="op">)</span>

<span class="va">x1</span> <span class="op">&lt;-</span> <span class="st">"e4 g b g bg4 g b g a4 g b g bb4 g b g"</span>
<span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"b4"</span>, <span class="st">"g4"</span>, <span class="va">x1</span><span class="op">)</span>
<span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"a4"</span>, <span class="st">"ba4"</span>, <span class="va">x2</span><span class="op">)</span>
<span class="va">p9</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span>, <span class="va">x1</span>, <span class="va">x3</span><span class="op">)</span>, <span class="fl">8</span>, <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="st">"1 3 2 3 21 3 2 3"</span>, <span class="fl">7</span><span class="op">)</span>, <span class="st">"21 3 2 3 21 3 2 3"</span><span class="op">)</span><span class="op">)</span>
<span class="va">p10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span>, <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">p1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e4"</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Finally, all of these phrases can be concatenated into one long phrase and passed to <code>track</code> to define the first voice for the first track. It’s defined now and many of these temporary object names are reused for the subsequent voice and second track.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">track1a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/track.html">track</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">p1a</span>, <span class="va">p2</span>, <span class="va">p3</span>, <span class="va">p4</span>, <span class="va">p5</span>, <span class="va">p6</span>, <span class="va">p7</span>, <span class="va">p8</span>, <span class="va">p9</span>, <span class="va">p10</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="guitar-1-voice-2" class="section level2">
<h2 class="hasAnchor">
<a href="#guitar-1-voice-2" class="anchor"></a>Guitar 1 voice 2</h2>
<p>The second voice is played only with the thumb. There is less to code. The hardest part, however, is having the discipline to ensure your two voices line up perfectly with one another as intended. You already take this care between notes, note info, and string numbers, when making phrases, but you must do the same between voices and tracks. An extra or a missing note in one or the other will lead to a mess. Your score may or may not run in LilyPond depending on the nature of the alignment issue, but even if it does, it will only reveal that two pieces of music are out of sync.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"s*4"</span>, <span class="fl">1</span>, <span class="st">"x"</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e*2"</span>, <span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fl">3</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e e d d c c e2 g2 f#2"</span>, <span class="st">"1*7 2 2"</span>, <span class="st">"5 5 4 4 5 5 6*3"</span><span class="op">)</span>

<span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e2 g2 f#2"</span>, <span class="st">"1 2 2"</span>, <span class="fl">6</span><span class="op">)</span>, <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e2 g3 f#3"</span>, <span class="st">"1 2 2"</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>
<span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e2 e2 d d c c"</span>, <span class="fl">1</span>, <span class="st">"6 6 4 4 5 5"</span><span class="op">)</span>, <span class="fl">1</span>, <span class="va">e</span>, <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span><span class="op">)</span>
<span class="va">p4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e2 e2 d d c c a2 g2 f#2"</span>, <span class="st">"1*7 2 2"</span>, <span class="st">"6 6 4 4 5*3 6 6"</span><span class="op">)</span>,
  <span class="fu"><a href="../reference/repeats.html">rp</a></span><span class="op">(</span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e2"</span>, <span class="fl">1</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"d d c c e2 g2 f#2"</span>, <span class="st">"1*5 2 2"</span>, <span class="st">"4 4 6*5"</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">p5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e2*4 s*4 e s*5 e2*8"</span>, <span class="fl">1</span>, <span class="st">"6*4 x*4 5 x*5 6*8"</span><span class="op">)</span>
<span class="va">p6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e2*4"</span>, <span class="fl">1</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e e d d c c a2 a2"</span>, <span class="fl">1</span>, <span class="st">"5 5 4 4 5*4"</span><span class="op">)</span><span class="op">)</span>
<span class="va">p7</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e2 s*7"</span>, <span class="fl">1</span>, <span class="st">"6 x*7"</span><span class="op">)</span>

<span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e2 e2 d d c c e2 g2 f#2"</span>, <span class="st">"1*7 2 2"</span>, <span class="st">"6 6 4 4 5 5 6*3"</span><span class="op">)</span>
<span class="va">p8</span> <span class="op">&lt;-</span> <span class="va">x3</span>
<span class="va">p9</span> <span class="op">&lt;-</span> <span class="va">x3</span>
<span class="va">p10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e*4"</span>, <span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>, <span class="va">x1</span>, <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"e2"</span>, <span class="fl">1</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Side note: Do not expect this example score to be easy to follow line by line. You may be highly familiar with your own transcriptions, but when looking at someone else’s after it has been fully put together, it’s likely too much abstraction to take in sensibly, especially when parts are split into multiple voices and tracks, which must visually separate code into disjoint pieces even though it pertains to music that is inherently paired.</p>
<p>A second track is created from a sequences of these parts, but the second voice must be specified. When these two tracks are bound together, the two different voice IDs will be assigned the same staff ID to share.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">track1b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/track.html">track</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>, <span class="va">p3</span>, <span class="va">p4</span>, <span class="va">p5</span>, <span class="va">p6</span>, <span class="va">p7</span>, <span class="va">p8</span>, <span class="va">p9</span>, <span class="va">p10</span><span class="op">)</span>, voice <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
</div>
<div id="guitar-2" class="section level2">
<h2 class="hasAnchor">
<a href="#guitar-2" class="anchor"></a>Guitar 2</h2>
<p>The second guitar adds a strummed rhythm section. It has only one voice. Again, some additional note info building blocks are helpful for avoiding some code duplication.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">i</span> <span class="op">&lt;-</span> <span class="st">"4 8 8"</span>
<span class="va">i1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/append_phrases.html">pn</a></span><span class="op">(</span><span class="va">i</span>, <span class="fl">4</span><span class="op">)</span>
<span class="va">i2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">i</span>, <span class="va">i</span>, <span class="st">"8*4"</span>, <span class="va">i</span><span class="op">)</span>
<span class="va">i3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">i</span>, <span class="va">i</span>, <span class="st">"8*4 8- 8*3"</span><span class="op">)</span>
<span class="va">i4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/append_phrases.html">pc</a></span><span class="op">(</span><span class="va">i</span>, <span class="va">i</span>, <span class="va">i</span>, <span class="st">"8 8 4"</span><span class="op">)</span></code></pre></div>
<p>Explicit chords require more typing than single notes so it is especially helpful to make use of the <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code> in-string expansion operator where possible.</p>
<p>As mentioned, for comparison, this guitar part is tabbed out using string-fret notation. This means for example that instead of specifying the pitch <code>e2</code> or <code>e,</code> along with the string number to play it on, <code>6</code>, you can specify string <code>6</code> and fret <code>2</code> (assuming the default <code>tuning = "standard"</code>). Instead of <code>phrase</code> or its alias <code>p</code>, use <code>sf_phrase</code> or <code>sfp</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p1a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*3 5*3 5321*3 5*3"</span>, <span class="st">"75000*3 7508*3 7005*3 75007*3"</span>, <span class="va">i1</span><span class="op">)</span>
<span class="va">p1a2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*3 5*3 5321*3 5*3"</span>, <span class="st">"75000*3 7508*3 7005*3 7508*3"</span>, <span class="va">i1</span><span class="op">)</span>
<span class="va">p0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*6 5321*3 5*3"</span>, <span class="st">"75000*3 75007*3 7005*3 75007*3"</span>, <span class="va">i1</span><span class="op">)</span>, <span class="fl">3</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">p1b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*13"</span>, <span class="st">"55000*3 55003*3 55005*4 55003*3"</span>, <span class="va">i2</span><span class="op">)</span>
<span class="va">p1c</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*11 1 3 3"</span>, <span class="st">"35450*3 35453*3 35455*5 7 007*2"</span>, <span class="va">i3</span><span class="op">)</span>
<span class="va">p1d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"6*6 64321*6"</span>, <span class="st">"022000*3 022003*3 30005*3 20233*3"</span>, <span class="va">i4</span><span class="op">)</span>
<span class="va">p1d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"6*6 64321*6"</span>, <span class="st">"022000*3 022002*3 30005*3 20233*3"</span>, <span class="va">i1</span><span class="op">)</span>
<span class="va">p1d3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*12"</span>, <span class="st">"02200*12"</span>, <span class="va">i1</span><span class="op">)</span>

<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">p1a</span>, <span class="va">p1b</span>, <span class="va">p1c</span>, <span class="va">p1d</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">p1a</span>, <span class="va">p1b</span>, <span class="va">p1c</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">p1d</span>, <span class="va">p1d2</span><span class="op">)</span>, <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">p4a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*12"</span>, <span class="st">"75000*12"</span>, <span class="va">i1</span><span class="op">)</span>, <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*13"</span>, <span class="st">"55000*13"</span>, <span class="va">i2</span><span class="op">)</span>, <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*13"</span>, <span class="st">"35450*13"</span>, <span class="va">i2</span><span class="op">)</span><span class="op">)</span>
<span class="va">p4b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*6 64321*6"</span>, <span class="st">"02200*6 30005*3 20233*3"</span>, <span class="va">i4</span><span class="op">)</span>
<span class="va">p4c</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"6*6 64321*6"</span>, <span class="st">"022000*6 30005*3 20233*3"</span>, <span class="va">i4</span><span class="op">)</span>
<span class="va">p4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">p4a</span>, <span class="va">p4b</span>, <span class="va">p4a</span>, <span class="va">p4c</span><span class="op">)</span>

<span class="va">p5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"6~ 6 5*14"</span>, <span class="st">"022000~ 022000 75000*3 7508*3 75007 75000 75008 75000 7508 75000 75007 75000"</span>, <span class="st">"1 1 4 8 8 4 8*10"</span><span class="op">)</span>

<span class="va">p6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5*12"</span>, <span class="st">"75000*12"</span>, <span class="va">i1</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>
<span class="va">p7</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"6*12"</span>, <span class="st">"022000*12"</span>, <span class="va">i1</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span>
<span class="va">p8</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">p1a</span>, <span class="va">p1a2</span><span class="op">)</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">p9</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">p1a</span>, <span class="va">p1b</span>, <span class="va">p1c</span>, <span class="va">p1d3</span><span class="op">)</span>

<span class="va">p10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5~ 5421"</span>, <span class="st">"75000~ 7500"</span>, <span class="st">"1 1"</span><span class="op">)</span> <span class="co"># hack around bug (double pitch full measure tie), again below (p11)</span>
<span class="va">p10a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"6~ 6"</span>, <span class="st">"022000~ 022000"</span>, <span class="st">"1 1"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">p10</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="va">p10b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repeats.html">volta</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">p10</span>, <span class="fl">2</span><span class="op">)</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">p11</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_phrase.html">sfp</a></span><span class="op">(</span><span class="st">"5~ 5421 5~ 5421 5~ 5 5 64321*2 6"</span>, <span class="st">"75000~ 7500 55000~ 5500 35450~ 3545 75007 30005 20233 022000"</span>, <span class="st">"1*7 2 2 1"</span><span class="op">)</span></code></pre></div>
<p>Create the track from a sequence of phrases.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">track2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/track.html">track</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">p1a</span>, <span class="va">p1a2</span>, <span class="va">p0</span>, <span class="va">p2</span>, <span class="va">p3</span>, <span class="va">p4</span>, <span class="va">p1a</span>, <span class="va">p1a2</span>, <span class="va">p5</span>, <span class="va">p6</span>, <span class="va">p7</span>, <span class="va">p8</span>, <span class="va">p9</span>, <span class="va">p10a</span>, <span class="va">p2</span>, <span class="va">p2</span>, <span class="va">p10b</span>, <span class="va">p11</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="chord-chart-and-chords-above-staff" class="section level2">
<h2 class="hasAnchor">
<a href="#chord-chart-and-chords-above-staff" class="anchor"></a>Chord chart and chords above staff</h2>
<p>Placing chord names above the music staff and including a chord chart of fretboard diagrams at the top of the score goes a long way to improving the quality of the score. Unfortunately, there is no quick and painless way to do this for longer scores.</p>
<p>The fretboard diagrams are relatively straightforward. You only need to create a named character vector defining the chords to include in the chord chart.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">chord_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"e:m"</span>, <span class="st">"e:m7/d"</span>, <span class="st">"c:maj7"</span>, <span class="st">"c:maj9"</span>, <span class="st">"e:m"</span>, <span class="st">"g:5.9"</span>, <span class="st">"g:5.9/f#"</span>, <span class="st">"e:m5.9"</span>, <span class="st">"s"</span>, <span class="st">"a:sus2"</span><span class="op">)</span>
<span class="va">chord_positions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x75ooo"</span>, <span class="st">"x55ooo"</span>, <span class="st">"x3545o"</span>, <span class="st">"x35435"</span>, <span class="st">"o22ooo"</span>, <span class="st">"3xooo5"</span>, <span class="st">"2xo233"</span>, <span class="st">"o22oo2"</span>, <span class="cn">NA</span>, <span class="st">"xo22oo"</span><span class="op">)</span>
<span class="va">chords</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chord_set.html">chord_set</a></span><span class="op">(</span><span class="va">chord_positions</span>, <span class="va">chord_names</span><span class="op">)</span></code></pre></div>
<p>That’s all. The silent rest <code>s</code> is ignored when building the chord chart, but is included for the next part because it is used to specify where not to include chord names.</p>
<p>For placing chords above the staff in time, however, you have to make a long vector of chord names and corresponding durations in order to insert each chord at the appropriate position in the sheet music. An important distinction here is that this pertains to the measures as they are engraved in the output. This means that the sequence is not necessarily the same number of measures as what you have coded. If there are repeat sections, you do not specify the chord names multiple times for each repeat. You strictly specify the chord name that goes above each measure (or part of a measure) as visible in the sheet music.</p>
<p>Specifying the chord sequence for this transcription “briefly” is an arduous task and horrendous to look at. Just take my word for it that these chord names and durations line up with the music staff as drawn in the output.</p>
<p>The indices below are used to index and extract the chords from <code>chord_names</code> without having to type them all out repeatedly. <code>chord_seq</code> below is a vector of corresponding durations. In this example, chords mostly last for a whole measure (actually for two). This is why this vector consists mostly of the value <code>1</code>. A <code>2</code> indicates the chord lasts a half measure, etc.</p>
<p>The silent rest <code>s</code> stored in <code>chord_names[9]</code> is used often to avoid excessively printing a chord name above two consecutive measures since in this score chords tend to span two measures.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">2</span>, <span class="fl">9</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">7</span>, 
       <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">2</span>, <span class="fl">9</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">7</span>, <span class="fl">5</span>, <span class="fl">8</span>, <span class="fl">6</span>, <span class="fl">7</span>, 
       <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">2</span>, <span class="fl">9</span>, <span class="fl">3</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">6</span><span class="op">:</span><span class="fl">7</span>, <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">2</span>, <span class="fl">9</span>, <span class="fl">3</span>, <span class="fl">9</span>, <span class="fl">5</span><span class="op">:</span><span class="fl">7</span>, 
       <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">25</span><span class="op">)</span>, 
       <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">2</span>, <span class="fl">9</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">10</span>, <span class="fl">9</span>, 
       <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">2</span>, <span class="fl">9</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">7</span>, 
       <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">2</span>, <span class="fl">9</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">7</span>, 
       <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">2</span>, <span class="fl">9</span>, <span class="fl">3</span>, <span class="fl">9</span>, <span class="fl">1</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">1</span><span class="op">)</span>

<span class="va">chord_seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">13</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">2</span>, 
               <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">6</span><span class="op">)</span>, 
               <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">2</span>, 
               <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">2</span>, 
               <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">26</span><span class="op">)</span>, 
               <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">8</span><span class="op">)</span>, 
               <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">8</span><span class="op">)</span>, 
               <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">2</span>, 
               <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">2</span>, 
               <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">11</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">chord_seq</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">chord_names</span><span class="op">[</span><span class="va">x</span><span class="op">]</span></code></pre></div>
</div>
<div id="create-tablature" class="section level2">
<h2 class="hasAnchor">
<a href="#create-tablature" class="anchor"></a>Create tablature</h2>
<p>Finally, bind the three tracks together, specifying the two tab staves the two guitars are assigned to. Each guitar also has a music staff above its tab staff. The bound tracks are passed to <code>score</code>, where the chords and chord sequence are provided to include a chord chart and chord names above the staff. The score is passed to <code>tab</code> along with the metadata and the tablature is rendered by LilyPond.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/trackbind.html">trackbind</a></span><span class="op">(</span><span class="va">track1a</span>, <span class="va">track1b</span>, <span class="va">track2</span>, id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="va">chords</span>, <span class="va">chord_seq</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/tab.html">tab</a></span><span class="op">(</span><span class="va">outfile</span>, key <span class="op">=</span> <span class="st">"em"</span>, time <span class="op">=</span> <span class="st">"4/4"</span>, tempo <span class="op">=</span> <span class="st">"4 = 120"</span>, <span class="va">header</span><span class="op">)</span></code></pre></div>
<p>The sheet music is six pages. Here is a preview of page one.</p>
<p>
<img src="https://github.com/leonawicz/tabr/blob/master/data-raw/vignette-pngs/ex3-ezios-family-p1.png?raw=true" class="centerimg" width="100%"></p>
<p>One thing to note is that this arrangement is written in Em because that is how to view the arrangement for guitar, but it is essentially a “reverse capo” where all six strings are tuned down equally by a full step. The sound is Dm, a full step below what is written. Rather than transpose the music staves and write the score more awkwardly, it is simply stated that the arrangement sounds lower than written, as often done when using a capo to transpose in the other direction and simply providing the capo fret.</p>
</div>
<div id="limitations" class="section level2">
<h2 class="hasAnchor">
<a href="#limitations" class="anchor"></a>Limitations</h2>
<p>This example arrangement highlights a few limitations of <code>tabr</code>.</p>
<p>First, as you will see in the tablature output, when including a music staff above the tab staff, the music staff will show the same pitch twice if the chord played on the guitar includes the same pitch played on two different strings. This is an annoying imperfection, but not problematic. Above you can see how <code>p10</code> and <code>p11</code> drop a redundant note from the second of each tied chord pair. This hack does not solve the problem, but leads to output that is less frustrating than otherwise. To see the difference, add the notes back in and rerender the score.</p>
<p>Another limitation can be seen in the slide on string one from the highest note in a strummed chord up to a higher single note on the same string. This is rendered by the LilyPond engraver as a slide from the bottom note of the chord instead of the top note.</p>
<p>Currently it is also not straight forward to specify add 9 chords. You can see 9th chord names in the output, but these are supposed to be add 9 chords.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/leonawicz">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
