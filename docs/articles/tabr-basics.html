<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Transcription overview • tabr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Transcription overview">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tabr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Home</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><h6 class="dropdown-header" data-toc-skip>Programming</h6></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-nw.html">Noteworthiness</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-scales.html">Musical scales</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-notes.html">Note functions</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-chords.html">Chord functions</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-noteinfo.html">Time and note info</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-music.html">The music class</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-converters.html">Syntax converters</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-fretboard.html">Fretboard diagram plots</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Transcription</h6></li>
    <li><a class="dropdown-item" href="../articles/tabr-basics.html">Basic overview</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-phrases.html">Musical phrases</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-helpers.html">Phrase helpers</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-chords.html">Chords</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-repeats.html">Repeats</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-tracks-scores.html">Tracks and scores</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-engraving.html">Render scores</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-snippets.html">Music snippets</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-chordchart.html">Render chord chart</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-tunings.html">Strings and tunings</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/tabr-ex1.html">Tuning and capo</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-ex2.html">Multiple voices</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-ex3.html">AC2 - Ezio's family</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-ex4.html">Gin Wigmore - Devil in me</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/leonawicz/tabr"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Transcription overview</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/tabr/blob/HEAD/vignettes/tabr-basics.Rmd" class="external-link"><code>vignettes/tabr-basics.Rmd</code></a></small>
      <div class="d-none name"><code>tabr-basics.Rmd</code></div>
    </div>

    
    
<p>Rendering sheet music is based on building up pieces of musical
information culminating in a score. The fundamental object to consider
in the transcription context is a phrase. A phrase is created from a
noteworthy string and incorporates additional information, most
importantly time and rhythm. It can also include positional information
such as the instrument string on which a note is played. Outside of
rendering tabs, there is no reason to construct phrase objects.
Everything from the phrase object on up is about using the R to LilyPond
pipeline to render some kind of sheet music document.</p>
<p>A good place to start is with a simple, reproducible example that
outlines the basic flow from small, succinct musical phrases, which
combine to form tracks, in turn combined into a score, and ending with
engraving the score to familiar sheet music. The brief example below
recreates the single measure of guitar tablature shown in the
<code>tabr</code> logo. Here are the steps as a list.</p>
<ul>
<li>Define a musical phrase with <code><a href="../reference/phrase.html">phrase()</a></code> or the shorthand
alias <code><a href="../reference/phrase.html">p()</a></code>.</li>
<li>Add the phrase to a <code><a href="../reference/track.html">track()</a></code>.</li>
<li>Add the track to a <code><a href="../reference/score.html">score()</a></code>.</li>
<li>Render the score to pdf with <code><a href="../reference/tab.html">tab()</a></code> or another
<code>render_*</code> function.</li>
</ul>
<div class="section level2">
<h2 id="constructing-a-musical-phrase">Constructing a musical phrase<a class="anchor" aria-label="anchor" href="#constructing-a-musical-phrase"></a>
</h2>
<p>The term phrase here simply means any arbitrary piece of musical
structure you string together. <code><a href="../reference/phrase.html">phrase()</a></code> takes three main
arguments when building a phrase from its component parts. The first
gives pitches (or rests) separated in time by spaces. For chords, remove
spaces to indicate simultaneous notes. For example, a rest followed by a
sequence of pitches might be <code>notes = "r a, c f d a f"</code>.</p>
<p><code>info</code> is note metadata such as duration. Whole notes are
given by 1, half notes by 2, quarter notes 4, and so on, e.g.,
<code>info = "4 8 8 8 8 8 8"</code> (or shorten to
<code>info = "4 8*6"</code>). This example does not require additional
information such as dotted notes, staccato notes, ties/slurs, slides,
bends, hammer ons and pull offs, etc.</p>
<p>The third argument, <code>string</code> only applies to fretted
string instruments and is always optional. In this example it specifies
the strings of a guitar. Providing this information in conjunction with
the pitch fixes the frets so that LilyPond does not have to guess them.
This only applies for tablature output. Note that the <code>x</code>
shown below is just a placeholder indicating no need to specify a string
for the quarter note rest. You can put a string number there but it is
ignored.</p>
<p>Explicit string numbers are not needed for this example since lowest
fret numbers (LilyPond default) are intended. They are provided for a
more complete example.</p>
<p>This is the general approach, but there are multiple ways to create
equivalent phrase objects in <code>tabr</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/phrase.html">phrase</a></span><span class="op">(</span>notes <span class="op">=</span> <span class="st">"r a, c f d a f"</span>, info <span class="op">=</span> <span class="st">"4 8*6"</span>, string <span class="op">=</span> <span class="st">"x 5 5 4 4 3 4"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Musical phrase&gt;</span></span>
<span><span class="co">#&gt; r4 &lt;a,\5&gt;8 &lt;c\5&gt;8 &lt;f\4&gt;8 &lt;d\4&gt;8 &lt;a\3&gt;8 &lt;f\4&gt;8</span></span></code></pre>
<p>Building a phrase from component parts may be necessary in some
programmatic contexts. However, when doing manual data entry for simple,
interactive examples, the music class offers a higher level of
abstraction, sparing you some typing as well as cognitive load.</p>
<div class="section level3">
<h3 id="music-syntax">Music syntax<a class="anchor" aria-label="anchor" href="#music-syntax"></a>
</h3>
<p>As an aside, if you are working with the <code>music</code> class,
you can enter notes, note info, and optionally string numbers if
applicable, all in one string. This is more efficient for data entry. It
can also be easier to follow because it binds the otherwise separate
arguments by timestep. See the vignettes and help documentation on music
objects for more details.</p>
<p>If you define the music object</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/music.html">as_music</a></span><span class="op">(</span><span class="st">"r4 a,8 c f d a f"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: r4 a,8 c8 f8 d8 a8 f8</span></span></code></pre>
<p>it can be passed directly to <code><a href="../reference/phrase.html">phrase()</a></code>, which understands
this syntax and interprets the <code>notes</code> argument as music
syntax if the <code>info</code> argument is not provided
(<code>info = NULL</code>). In fact, the music object does not even need
to be previously defined. The string format can be directly provided to
<code><a href="../reference/phrase.html">phrase()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"r4 a,8 c f d a f"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Musical phrase&gt;</span></span>
<span><span class="co">#&gt; r4 &lt;a,&gt;8 &lt;c&gt;8 &lt;f&gt;8 &lt;d&gt;8 &lt;a&gt;8 &lt;f&gt;8</span></span></code></pre>
<p>Notice how each timestep is complete within the single character
string above. Also, durations (and string numbers) can repeat implicitly
until an explicit change occurs.</p>
</div>
</div>
<div class="section level2">
<h2 id="tracks">Tracks<a class="anchor" aria-label="anchor" href="#tracks"></a>
</h2>
<p>Track construction is as simple as wrapping a phrase object in
<code><a href="../reference/track.html">track()</a></code>. This example uses a single phrase. Typically a
track would consist of many phrases concatenated together. Tracks are
just tibble data frames with an additional track class.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">track1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/track.html">track</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span>
<span><span class="va">track1</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; # A tibble: 1 × 7</span></span>
<span><span class="co">#&gt;   phrase       clef     key   tab   tuning    voice lyrics</span></span>
<span><span class="co">#&gt;   &lt;list&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;lgl&gt; &lt;chr&gt;     &lt;int&gt; &lt;chr&gt; </span></span>
<span><span class="co">#&gt; 1 &lt;phrase [1]&gt; treble_8 NA    TRUE  e,a,dgbe'     1 NA</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="scores">Scores<a class="anchor" aria-label="anchor" href="#scores"></a>
</h2>
<p>The complete score is composed of one or more tracks. This example
has only a single track. Just as the track constructor takes phrases,
the score constructor takes tracks as inputs. Score objects are tibble
data frames with an additional score class.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">song</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="va">track1</span><span class="op">)</span></span>
<span><span class="va">song</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; # A tibble: 1 × 8</span></span>
<span><span class="co">#&gt;   phrase       clef     key   tab   tuning    voice lyrics    id</span></span>
<span><span class="co">#&gt;   &lt;list&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;lgl&gt; &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;  &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 &lt;phrase [1]&gt; treble_8 NA    TRUE  e,a,dgbe'     1 NA         1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="calling-lilypond-from-r">Calling LilyPond from R<a class="anchor" aria-label="anchor" href="#calling-lilypond-from-r"></a>
</h2>
<p>Once a score object is created, it is ready to be sent to LilyPond.
If LilyPond is installed on your system (and added to your system PATH
variable on Windows systems), <code><a href="../reference/tab.html">tab()</a></code> or any of the
<code>render_*</code> functions should call it successfully.
Alternatively, on Windows, it can be added explicitly by calling
<code><a href="../reference/tabr_options.html">tabr_options()</a></code>. This option to specify the LilyPond path is
still available on other systems. An example of this is commented out
below. However, <code>tabr</code> will do its best on package load to
set these paths in <code><a href="../reference/tabr_options.html">tabr_options()</a></code> for you if it can
successfully detect a LilyPond installation in a standard file system
location, so you may not have to do anything. Just check
<code><a href="../reference/tabr_options.html">tabr_options()</a></code> after you load the package. If any of the
paths are equal to the empty string <code>""</code>, then you need to
set the paths. Otherwise you should be ready to run LilyPond from R.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For example if path to `/bin` not set (edit depending on your installation)</span></span>
<span><span class="co"># tabr_options(lilypond = "C:/lilypond-2.24.2/bin/lilypond.exe")</span></span></code></pre></div>
<p>Technically, when loading <code>tabr</code> on Windows it will
attempt to check the specific path above to see if
<code>lilypond.exe</code> exists there. If it does, the path in
<code><a href="../reference/tabr_options.html">tabr_options()</a></code> will be filled in for you. Therefore, if you
need to specify the LilyPond path because it is not in your PATH
environment variable and nothing shows in <code><a href="../reference/tabr_options.html">tabr_options()</a></code>,
then the path shown above is probably not where you installed
LilyPond.</p>
</div>
<div class="section level2">
<h2 id="score-metadata">Score metadata<a class="anchor" aria-label="anchor" href="#score-metadata"></a>
</h2>
<p>Other than ensuring LilyPond is accessible, there is only one
function left to call in this series of steps to produce the sheet
music. <code><a href="../reference/tab.html">tab()</a></code> takes several arguments, many of which are
optional and have default values. However, since music is so variable it
makes sense to specify these arguments every time. These arguments
include metadata about the piece such as key signature, time signature,
tempo, title, author, and so on. Most of that is not needed here, but
for good practice at least be unambiguous about the music itself and
specify a key signature, time signature and tempo.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tab.html">tab</a></span><span class="op">(</span><span class="va">song</span>, <span class="st">"phrase.pdf"</span>, key <span class="op">=</span> <span class="st">"dm"</span>, time <span class="op">=</span> <span class="st">"4/4"</span>, tempo <span class="op">=</span> <span class="st">"4 = 120"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; #### Engraving score to phrase.pdf ####</span></span>
<span><span class="co">#&gt; GNU LilyPond 2.18.2</span></span>
<span><span class="co">#&gt; Processing `./phrase.ly'</span></span>
<span><span class="co">#&gt; Parsing...</span></span>
<span><span class="co">#&gt; Interpreting music...</span></span>
<span><span class="co">#&gt; Preprocessing graphical objects...</span></span>
<span><span class="co">#&gt; Interpreting music...</span></span>
<span><span class="co">#&gt; MIDI output to `./phrase.mid'...</span></span>
<span><span class="co">#&gt; Finding the ideal number of pages...</span></span>
<span><span class="co">#&gt; Fitting music on 1 page...</span></span>
<span><span class="co">#&gt; Drawing systems...</span></span>
<span><span class="co">#&gt; Layout output to `./phrase.ps'...</span></span>
<span><span class="co">#&gt; Converting to `./phrase.pdf'...</span></span>
<span><span class="co">#&gt; Success: compilation successfully completed</span></span></code></pre>
<p>This log output will be printed at the R console. Load the new pdf
file to see the result. It should look like this.</p>
<p>
<img src="https://github.com/leonawicz/tabr/blob/master/data-raw/vignette-pngs/ex00.png?raw=true" class="centerimg" width="50%"></p>
</div>
<div class="section level2">
<h2 id="piping">Piping<a class="anchor" aria-label="anchor" href="#piping"></a>
</h2>
<p><code>tabr</code> functions are designed to support piping. Even
given the series of steps from a phrase to a rendered pdf, a short
example like this does not require a single assignment. The same steps
involved in building up the structure and rendering the output could be
performed as follows.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/phrase.html">p</a></span><span class="op">(</span><span class="st">"r a2 c f d a f"</span>, <span class="st">"4 8*6"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/track.html">track</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab.html">tab</a></span><span class="op">(</span><span class="st">"phrase.pdf"</span>, key <span class="op">=</span> <span class="st">"dm"</span>, time <span class="op">=</span> <span class="st">"4/4"</span>, tempo <span class="op">=</span> <span class="st">"4 = 120"</span><span class="op">)</span></span></code></pre></div>
<p>While music can be quite complex and a full score will be much
longer, <code>tabr</code> strives to minimize the work while still
forcing some sense of organized structure. For long and complex music,
it can require some effort and practice to ensure your approach to
transcription in your R code is not opaque.</p>
<p>To recap, the <code><a href="../reference/phrase.html">phrase()</a></code> is defined, added to a
<code><a href="../reference/track.html">track()</a></code>, the track is added to a <code><a href="../reference/score.html">score()</a></code>, and
the score is rendered to tablature in a pdf file with <code><a href="../reference/tab.html">tab()</a></code>
or other <code>render_*</code> function. The next tutorial section
discusses phrases in more detail and provides an overview of the
different notes and note metadata that can be specified when
constructing a phrase.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/leonawicz" class="external-link">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
