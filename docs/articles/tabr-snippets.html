<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Music snippets in R markdown • tabr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Music snippets in R markdown">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tabr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Home</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><h6 class="dropdown-header" data-toc-skip>Programming</h6></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-nw.html">Noteworthiness</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-scales.html">Musical scales</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-notes.html">Note functions</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-chords.html">Chord functions</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-noteinfo.html">Time and note info</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-music.html">The music class</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-prog-converters.html">Syntax converters</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-fretboard.html">Fretboard diagram plots</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Transcription</h6></li>
    <li><a class="dropdown-item" href="../articles/tabr-basics.html">Basic overview</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-phrases.html">Musical phrases</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-helpers.html">Phrase helpers</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-chords.html">Chords</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-repeats.html">Repeats</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-tracks-scores.html">Tracks and scores</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-engraving.html">Render scores</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-snippets.html">Music snippets</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-chordchart.html">Render chord chart</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-tunings.html">Strings and tunings</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/tabr-ex1.html">Tuning and capo</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-ex2.html">Multiple voices</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-ex3.html">AC2 - Ezio's family</a></li>
    <li><a class="dropdown-item" href="../articles/tabr-ex4.html">Gin Wigmore - Devil in me</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/leonawicz/tabr"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Music snippets in R markdown</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/tabr/blob/HEAD/vignettes/tabr-snippets.Rmd" class="external-link"><code>vignettes/tabr-snippets.Rmd</code></a></small>
      <div class="d-none name"><code>tabr-snippets.Rmd</code></div>
    </div>

    
    
<p>This section demonstrates how to create sheet music snippets in R
markdown documents using the LilyPond backend. To do this, use the set
of <code>plot_music*</code> functions that wrap around the
<code>render_music*</code> functions.</p>
<p>These abstract the process of rendering a sheet music snippet to png
and loading the rendered image back into R to be displayed as a plot in
an open graphics device or inserted into an R markdown code chunk.</p>
<p>While these functions abstract away the details of the process, this
is not the same as making the plot completely in R. R is only displaying
the intermediary png file. LilyPond is required to engrave the sheet
music.</p>
<p>For R markdown you can alternatively render the png using the
corresponding <code>render_music*</code> function and then place it in
the document explicitly using <code><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html" class="external-link">knitr::include_graphics()</a></code>.
See <code><a href="../reference/render_music.html">render_music()</a></code> for more details. Below are some example
snippets for guitar and bass.</p>
<div class="section level2">
<h2 id="music-objects">Music objects<a class="anchor" aria-label="anchor" href="#music-objects"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/music.html">as_music</a></span><span class="op">(</span><span class="st">"a,4;5*5 b,4- c4 cgc'e'~4 cgc'e'1 e'4;2 c';3 g;4 c;5 ce'1;51"</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/music.html">as_music</a></span><span class="op">(</span><span class="st">"a,,4;3*5 b,,4- c,4 c,g,c~4 c,g,c1 c4;1 g,;2 c,;3 g,;2 c,c1;31"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Timesteps: 14 (11 notes, 3 chords)</span></span>
<span><span class="co">#&gt;   Octaves: tick</span></span>
<span><span class="co">#&gt;   Accidentals: flat</span></span>
<span><span class="co">#&gt;   Key signature: c</span></span>
<span><span class="co">#&gt;   Time signature: 4/4</span></span>
<span><span class="co">#&gt;   Tempo: 2 = 60</span></span>
<span><span class="co">#&gt;   Lyrics: NA</span></span>
<span><span class="co">#&gt;   Strings: 5 5 5 5 5 5 5 5432 5432 2...</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: a,4 a,4 a,4 a,4 a,4 b,4- c4 &lt;cgc'e'~&gt;4 &lt;cgc'e'&gt;1 e'4 c'4 g4 c4 &lt;ce'&gt;1</span></span></code></pre>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="co">#&gt; &lt;Music string&gt;</span></span>
<span><span class="co">#&gt;   Timesteps: 14 (11 notes, 3 chords)</span></span>
<span><span class="co">#&gt;   Octaves: tick</span></span>
<span><span class="co">#&gt;   Accidentals: flat</span></span>
<span><span class="co">#&gt;   Key signature: c</span></span>
<span><span class="co">#&gt;   Time signature: 4/4</span></span>
<span><span class="co">#&gt;   Tempo: 2 = 60</span></span>
<span><span class="co">#&gt;   Lyrics: NA</span></span>
<span><span class="co">#&gt;   Strings: 3 3 3 3 3 3 3 321 321 1...</span></span>
<span><span class="co">#&gt;   Format: space-delimited time</span></span>
<span><span class="co">#&gt;   Values: a,,4 a,,4 a,,4 a,,4 a,,4 b,,4- c,4 &lt;c,g,c~&gt;4 &lt;c,g,c&gt;1 c4 g,4 c,4 g,4 &lt;c,c&gt;1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="snippet-in-r-markdown-chunk">Snippet in R markdown chunk<a class="anchor" aria-label="anchor" href="#snippet-in-r-markdown-chunk"></a>
</h2>
<p>The defaults for <code><a href="../reference/plot_music.html">plot_music()</a></code> include treble clef and no
tab staff. Plot the music object, <code>g</code>. As you can see, this
appears off by an octave because the guitar transcription should use
<code>clef = "treble_8"</code> instead of the default
<code>clef = "treble"</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_music.html">plot_music</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></code></pre></div>
<p><img src="tabr-snippets_files/figure-html/snippet1-1.png" width="100%"></p>
<p>Above you can see the call to <code>plot_music(g)</code>in the
document since <code>echo = TRUE</code> for the code chunk. In an
interactive R session, this call draws the plot to the active graphics
device. The R markdown code chunk for inserting the above plot into this
document looks like this in the Rmd file.</p>
<pre><code>```{r}
plot_music(g)
```</code></pre>
<p>The image will scale properly in R so that it does not distort.
However, the graphics device dimensions still matter. If you want to
avoid excessive whitespace for example, you may want to specify
<code>knitr</code> figure options,
e.g. <code>fig.height=2, fig.width=7</code>, globally or in a code
chunk.</p>
<p>The values you choose depend on how tall your sheet music snippet is.
If you enter a long snippet in code, LilyPond may wrap this around to
multiple lines in the png file it creates. Therefore, this may require
some trial and error. Sheet music snippets are intended to be curated
one-offs for inserting in documents.</p>
</div>
<div class="section level2">
<h2 id="additional-wrappers">Additional wrappers<a class="anchor" aria-label="anchor" href="#additional-wrappers"></a>
</h2>
<p>There are various wrapper functions offering convenient, sensible
default arguments based on the function name.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_music.html">plot_music_tab</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span> <span class="co"># tab staff only</span></span></code></pre></div>
<p><img src="tabr-snippets_files/figure-html/snippet2-1.png" width="100%"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_music.html">plot_music_guitar</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span> <span class="co"># 8va treble clef for guitar, plus tab staff</span></span></code></pre></div>
<p><img src="tabr-snippets_files/figure-html/snippet3-1.png" width="100%"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_music.html">plot_music_bc</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span> <span class="co"># bass clef</span></span></code></pre></div>
<p><img src="tabr-snippets_files/figure-html/snippet4-1.png" width="100%"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_music.html">plot_music_bass</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span> <span class="co"># bass clef and tab staff</span></span></code></pre></div>
<p><img src="tabr-snippets_files/figure-html/snippet5-1.png" width="100%"></p>
<p>Depending on the function, additional relevant arguments include
<code>clef</code>, <code>tab</code>, <code>tuning</code> and
<code>string_names</code>. Layout arguments include <code>header</code>,
<code>paper</code>, <code>colors</code>, <code>transparent</code> and
<code>res</code>. The function <code><a href="../reference/plot_music.html">plot_music_tc()</a></code> is
equivalent to <code><a href="../reference/plot_music.html">plot_music()</a></code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/leonawicz" class="external-link">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
