<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music snippets in R markdown • tabr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Music snippets in R markdown">
<meta property="og:description" content="tabr">
<meta property="og:image" content="https://leonawicz.github.io/tabr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Programming</li>
    <li>
      <a href="../articles/tabr-prog-nw.html">Noteworthiness</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-scales.html">Musical scales</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-notes.html">Note functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-chords.html">Chord functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-noteinfo.html">Time and note info</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-music.html">The music class</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-converters.html">Syntax converters</a>
    </li>
    <li>
      <a href="../articles/tabr-fretboard.html">Fretboard diagram plots</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Transcription</li>
    <li>
      <a href="../articles/tabr-basics.html">Basic overview</a>
    </li>
    <li>
      <a href="../articles/tabr-phrases.html">Musical phrases</a>
    </li>
    <li>
      <a href="../articles/tabr-helpers.html">Phrase helpers</a>
    </li>
    <li>
      <a href="../articles/tabr-chords.html">Chords</a>
    </li>
    <li>
      <a href="../articles/tabr-repeats.html">Repeats</a>
    </li>
    <li>
      <a href="../articles/tabr-tracks-scores.html">Tracks and scores</a>
    </li>
    <li>
      <a href="../articles/tabr-engraving.html">Render scores</a>
    </li>
    <li>
      <a href="../articles/tabr-snippets.html">Music snippets</a>
    </li>
    <li>
      <a href="../articles/tabr-chordchart.html">Render chord chart</a>
    </li>
    <li>
      <a href="../articles/tabr-tunings.html">Strings and tunings</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tabr-ex1.html">Tuning and capo</a>
    </li>
    <li>
      <a href="../articles/tabr-ex2.html">Multiple voices</a>
    </li>
    <li>
      <a href="../articles/tabr-ex3.html">AC2 - Ezio's family</a>
    </li>
    <li>
      <a href="../articles/tabr-ex4.html">Gin Wigmore - Devil in me</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leonawicz/tabr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="tabr-snippets_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="tabr-snippets_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="tabr-snippets_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Music snippets in R markdown</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/tabr/blob/master/vignettes/tabr-snippets.Rmd"><code>vignettes/tabr-snippets.Rmd</code></a></small>
      <div class="hidden name"><code>tabr-snippets.Rmd</code></div>

    </div>

    
    
<p>This section demonstrates how to create sheet music snippets in R markdown documents using the LilyPond backend. To do this, use the set of <code>plot_music_*</code> functions that wrap around the <code>render_music_*</code> functions.</p>
<p>These abstract the process of rendering a sheet music snippet to png and loading the rendered image back into R to be displayed as a plot in an open graphics device or inserted into an R markdown code chunk.</p>
<p>While these functions abstract away the details of the process, this is not the same as making the plot completely in R. R is only displaying the intermediary png file. LilyPond is required to engrave the sheet music.</p>
<p>For R markdown you can alternatively render the png using the corresponding <code>render_music_*</code> function and then place it in the document explicitly using <code><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">knitr::include_graphics</a></code>. See <code><a href="../reference/render_music.html">?render_music</a></code> for more details. Below are some example snippets for guitar and bass.</p>
<div id="music-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#music-objects" class="anchor"></a>Music objects</h2>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/music.html">as_music</a></span><span class="op">(</span><span class="st">"a,4;5*5 b,4- c4 cgc'e'~4 cgc'e'1 e'4;2 c';3 g;4 c;5 ce'1;51"</span><span class="op">)</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/music.html">as_music</a></span><span class="op">(</span><span class="st">"a,,4;3*5 b,,4- c,4 c,g,c~4 c,g,c1 c4;1 g,;2 c,;3 g,;2 c,c1;31"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Music string&gt;
#&gt;   Timesteps: </span><span>14 (11 notes, 3 chords)</span><span style="color: #555555;font-weight: bold;">
#&gt;   Octaves: </span><span>tick</span><span style="color: #555555;font-weight: bold;">
#&gt;   Accidentals: </span><span>flat</span><span style="color: #555555;font-weight: bold;">
#&gt;   Key signature: </span><span>c</span><span style="color: #555555;font-weight: bold;">
#&gt;   Time signature: </span><span>4/4</span><span style="color: #555555;font-weight: bold;">
#&gt;   Tempo: </span><span>2 = 60</span><span style="color: #555555;font-weight: bold;">
#&gt;   Lyrics: </span><span>NA</span><span style="color: #555555;font-weight: bold;">
#&gt;   Strings: </span><span>5 5 5 5 5 5 5 5432 5432 2...</span><span style="color: #555555;font-weight: bold;">
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">a,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">a,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">a,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">a,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">a,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">b,</span><span style="color: #BBBB00;">4-</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">cgc'e'~</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">cgc'e'</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">1</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">e'</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">c'</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">ce'</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">1</span><span>
</span></code></pre>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Music string&gt;
#&gt;   Timesteps: </span><span>14 (11 notes, 3 chords)</span><span style="color: #555555;font-weight: bold;">
#&gt;   Octaves: </span><span>tick</span><span style="color: #555555;font-weight: bold;">
#&gt;   Accidentals: </span><span>flat</span><span style="color: #555555;font-weight: bold;">
#&gt;   Key signature: </span><span>c</span><span style="color: #555555;font-weight: bold;">
#&gt;   Time signature: </span><span>4/4</span><span style="color: #555555;font-weight: bold;">
#&gt;   Tempo: </span><span>2 = 60</span><span style="color: #555555;font-weight: bold;">
#&gt;   Lyrics: </span><span>NA</span><span style="color: #555555;font-weight: bold;">
#&gt;   Strings: </span><span>3 3 3 3 3 3 3 321 321 1...</span><span style="color: #555555;font-weight: bold;">
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">a,,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">a,,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">a,,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">a,,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">a,,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">b,,</span><span style="color: #BBBB00;">4-</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">c,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">c,g,c~</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">c,g,c</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">1</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">g,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">c,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">g,</span><span style="color: #BBBB00;">4</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">c,c</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">1</span><span>
</span></code></pre>
</div>
<div id="snippet-in-r-markdown-chunk" class="section level2">
<h2 class="hasAnchor">
<a href="#snippet-in-r-markdown-chunk" class="anchor"></a>Snippet in R markdown chunk</h2>
<p>The defaults for <code>plot_music</code> include treble clef and no tab staff. Plot the music object, <code>g</code>. As you can see, this appears off by an octave because the guitar transcription should use <code>clef = "treble_8"</code> instead of the default <code>clef = "treble"</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="../reference/plot_music.html">plot_music</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></pre></div>
<p><img src="tabr-snippets_files/figure-html/snippet1-1.png" width="100%"></p>
<p>Above you can see the call to <code><a href="../reference/plot_music.html">plot_music(g)</a></code>in the document since <code>echo = TRUE</code> for the code chunk. In an interactive R session, this call draws the plot to the active graphics device. The R markdown code chunk for inserting the above plot into this document looks like this in the Rmd file.</p>
<pre><code>```{r}
plot_music(g)
```</code></pre>
<p>The image will scale properly in R so that it does not distort. However, the graphics device dimensions still matter. If you want to avoid excessive whitespace for example, you may want to specify <code>knitr</code> figure options, e.g. <code>fig.height=2, fig.width=7</code>, globally or in a code chunk.</p>
<p>The values you choose depend on how tall your sheet music snippet is. If you enter a long snippet in code, LilyPond may wrap this around to multiple lines in the png file it creates. Therefore, this may require some trial and error. Sheet music snippets are intended to be curated one-offs for inserting in documents.</p>
</div>
<div id="additional-wrappers" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-wrappers" class="anchor"></a>Additional wrappers</h2>
<p>There are various wrapper functions offering convenient, sensible default arguments based on the function name.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="fu"><a href="../reference/plot_music.html">plot_music_tab</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span> <span class="co"># tab staff only</span></pre></div>
<p><img src="tabr-snippets_files/figure-html/snippet2-1.png" width="100%"></p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="fu"><a href="../reference/plot_music.html">plot_music_guitar</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span> <span class="co"># 8va treble clef for guitar, plus tab staff</span></pre></div>
<p><img src="tabr-snippets_files/figure-html/snippet3-1.png" width="100%"></p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="fu"><a href="../reference/plot_music.html">plot_music_bc</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span> <span class="co"># bass clef</span></pre></div>
<p><img src="tabr-snippets_files/figure-html/snippet4-1.png" width="100%"></p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="../reference/plot_music.html">plot_music_bass</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span> <span class="co"># bass clef and tab staff</span></pre></div>
<p><img src="tabr-snippets_files/figure-html/snippet5-1.png" width="100%"></p>
<p>Depending on the function, additional relevant arguments include <code>clef</code>, <code>tab</code>, <code>tuning</code> and <code>string_names</code>. Layout arguments include <code>header</code>, <code>paper</code>, <code>colors</code>, <code>transparent</code> and <code>res</code>. The function <code>plot_music_tc</code> is equivalent to <code>plot_music</code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/leonawicz">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
