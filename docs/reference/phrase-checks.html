<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Phrase validation and coercion — phrase-checks • tabr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Phrase validation and coercion — phrase-checks" />
<meta property="og:description" content="These helper functions add some validation checks for phrase and candidate
phrase objects." />
<meta property="og:image" content="http://leonawicz.github.io/tabr/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-46129458-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-46129458-3');
</script>


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.9.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-info-circle"></span>
     
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Programming</li>
    <li>
      <a href="../articles/tabr-prog-nw.html">Noteworthiness</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-scales.html">Musical scales</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-notes.html">Note functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-chords.html">Chord functions</a>
    </li>
    <li>
      <a href="../articles/tabr-fretboard.html">Fretboard diagram plots</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Transcription</li>
    <li>
      <a href="../articles/tabr-basics.html">Basic overview</a>
    </li>
    <li>
      <a href="../articles/tabr-phrases.html">Musical phrases</a>
    </li>
    <li>
      <a href="../articles/tabr-helpers.html">Phrase helpers</a>
    </li>
    <li>
      <a href="../articles/tabr-chords.html">Chords</a>
    </li>
    <li>
      <a href="../articles/tabr-repeats.html">Repeats</a>
    </li>
    <li>
      <a href="../articles/tabr-tracks-scores.html">Tracks and scores</a>
    </li>
    <li>
      <a href="../articles/tabr-engraving.html">Engraving</a>
    </li>
    <li>
      <a href="../articles/tabr-tunings.html">Strings and tunings</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/tabr-ex1.html">Tuning and capo</a>
    </li>
    <li>
      <a href="../articles/tabr-ex2.html">Multiple voices</a>
    </li>
    <li>
      <a href="../articles/tabr-ex3.html">Ezio's family</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leonawicz/tabr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Phrase validation and coercion</h1>
    <small class="dont-index">Source: <a href='https://github.com/leonawicz/tabr/blob/master/R/phrase.R'><code>R/phrase.R</code></a></small>
    <div class="hidden name"><code>phrase-checks.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These helper functions add some validation checks for phrase and candidate
phrase objects.</p>
    </div>

    <pre class="usage"><span class='fu'>as_phrase</span>(<span class='no'>phrase</span>)

<span class='fu'>phrasey</span>(<span class='no'>phrase</span>)

<span class='fu'>notify</span>(<span class='no'>phrase</span>)

<span class='fu'>phrase_notes</span>(<span class='no'>phrase</span>, <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>phrase_info</span>(<span class='no'>phrase</span>, <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>phrase_strings</span>(<span class='no'>phrase</span>, <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>notable</span>(<span class='no'>phrase</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>phrase</th>
      <td><p>phrase object or character string (candidate phrase).</p></td>
    </tr>
    <tr>
      <th>collapse</th>
      <td><p>logical, collapse result into a single string ready for
phrase construction.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>see details for each function's purpose and return value.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Use these functions with some caution. They are not intended for strictness
and perfection.
<code>phrasey</code> checks whether an object is weakly phrase-like and returns
<code>TRUE</code> or <code>FALSE</code>.
It can be used to safeguard against the most obvious cases of <code>phrase</code>
not containing valid phrase syntax when programming.
However, it may also be limiting. Use wear sensible.</p>
<p><code>as_phrase</code> coerces an object to a phrase object if possible.
This function performs an internal <code>phrasey</code> check.</p>
<p><code>notify</code> attempts to decompose a phrase object back to its original
input vectors consisting of notes, note info, and optionally, instrument
string numbering.
If successful, it returns a tibble data frame with columns: <code>notes</code>,
<code>info</code>, <code>string</code>.</p>
<p>Unless decomposing very simple phrases, this function is likely to reveal
limitations.
Complex phrase objects constructed originally with <code>phrase</code> can be
challenging to deconstruct in a one to one manner.
Information may be lost, garbled, or the function may fail.
For example, this function is not advanced enough to unravel repeat notation
or handle arbitrary text notations attached to notes.</p>
<p><code>notable</code> returns <code>TRUE</code> or <code>FALSE</code> regarding whether a
 phrase can be converted back to character string inputs,
 not necessarily with complete correctness, but without simple failure.
 It checks for phrasiness. Then it tries to call <code>notify</code> and returns
 <code>FALSE</code> gracefully if that call throws an exception.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Create a list of phrase objects</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='phrase.html'>phrase</a></span>(<span class='st'>"c ec'g' ec'g'"</span>, <span class='st'>"4 4 2"</span>) <span class='co'># no string numbers (not recommended)</span>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='phrase.html'>phrase</a></span>(<span class='st'>"c ec4g4 ec4g4"</span>, <span class='st'>"4 4 2"</span>) <span class='co'># same as above</span>
<span class='no'>p3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='phrase.html'>phrase</a></span>(<span class='st'>"c b, c"</span>, <span class='st'>"4. 8( 8)"</span>, <span class='st'>"5 5 5"</span>) <span class='co'># direction implies hammer on</span>
<span class='no'>p4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='phrase.html'>phrase</a></span>(<span class='st'>"b2 c d"</span>, <span class='st'>"4( 4)- 2"</span>, <span class='st'>"5 5 5"</span>) <span class='co'># hammer and slide</span>
<span class='no'>p5</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='phrase.html'>phrase</a></span>(<span class='st'>"c ec'g'~ ec'g'"</span>, <span class='fl'>1</span>, <span class='st'>"5 432 432"</span>) <span class='co'># tied chord</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='no'>p1</span>, <span class='no'>p2</span>, <span class='no'>p3</span>, <span class='no'>p4</span>, <span class='no'>p5</span>)

<span class='co'># Check if phrases and strings are phrasey</span>
<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span>(<span class='no'>x</span>, <span class='no'>phrasey</span>)</div><div class='output co'>#&gt; [1] TRUE TRUE TRUE TRUE TRUE</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='no'>x</span>), <span class='no'>phrasey</span>, <span class='kw'>USE.NAMES</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; [1] TRUE TRUE TRUE TRUE TRUE</div><div class='input'>
<span class='co'># Coerce character string representation to phrase and compare with original</span>
<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='no'>x</span>), <span class='no'>as_phrase</span>)
<span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span>(<span class='no'>x</span>, <span class='no'>y</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># Check if notable</span>
<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span>(<span class='no'>x</span>, <span class='no'>notable</span>)</div><div class='output co'>#&gt; [1] TRUE TRUE TRUE TRUE TRUE</div><div class='input'><span class='fu'>notable</span>(<span class='fu'><a href='phrase.html'>p</a></span>(<span class='st'>"a b c"</span>, <span class='fl'>1</span>))</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'>notable</span>(<span class='st'>"a b x"</span>) <span class='co'># note: not constructible as a phrase in the first place</span></div><div class='output co'>#&gt; [1] FALSE</div><div class='input'>
<span class='co'># Notify phrases</span>
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span>(<span class='no'>rbind</span>, <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>x</span>, <span class='no'>notify</span>))
<span class='no'>d</span></div><div class='output co'>#&gt; <span style='color: #555555;'># A tibble: 15 x 3</span><span>
#&gt;    notes    info  string
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> 
#&gt; </span><span style='color: #555555;'> 1</span><span> c        4     </span><span style='color: #BB0000;'>NA</span><span>    
#&gt; </span><span style='color: #555555;'> 2</span><span> ec'g'    4     </span><span style='color: #BB0000;'>NA</span><span>    
#&gt; </span><span style='color: #555555;'> 3</span><span> ec'g'    2     </span><span style='color: #BB0000;'>NA</span><span>    
#&gt; </span><span style='color: #555555;'> 4</span><span> c        4     </span><span style='color: #BB0000;'>NA</span><span>    
#&gt; </span><span style='color: #555555;'> 5</span><span> ec'g'    4     </span><span style='color: #BB0000;'>NA</span><span>    
#&gt; </span><span style='color: #555555;'> 6</span><span> ec'g'    2     </span><span style='color: #BB0000;'>NA</span><span>    
#&gt; </span><span style='color: #555555;'> 7</span><span> c        4.    5     
#&gt; </span><span style='color: #555555;'> 8</span><span> b,       8(    5     
#&gt; </span><span style='color: #555555;'> 9</span><span> c        8)    5     
#&gt; </span><span style='color: #555555;'>10</span><span> b,       4(    5     
#&gt; </span><span style='color: #555555;'>11</span><span> c        4)-   5     
#&gt; </span><span style='color: #555555;'>12</span><span> d        2     5     
#&gt; </span><span style='color: #555555;'>13</span><span> c        1     5     
#&gt; </span><span style='color: #555555;'>14</span><span> e~c'~g'~ 1     432   
#&gt; </span><span style='color: #555555;'>15</span><span> ec'g'    1     432   </div><div class='input'>
<span class='co'># Wrappers around notify extract components, default to collapsed strings</span>
<span class='fu'>phrase_notes</span>(<span class='no'>p5</span>)</div><div class='output co'>#&gt; </span><span style='color: #555555;font-weight: bold;'>&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style='color: #555555;font-weight: bold;'>
#&gt;   Values: </span><span style='color: #00BBBB;font-weight: bold;'>c</span><span> </span><span style='color: #BBBB00;'>&lt;</span><span style='color: #00BBBB;font-weight: bold;'>e</span><span style='color: #BBBB00;'>~</span><span style='color: #00BBBB;font-weight: bold;'>c</span><span style='color: #00BBBB;'>'</span><span style='color: #BBBB00;'>~</span><span style='color: #00BBBB;font-weight: bold;'>g</span><span style='color: #00BBBB;'>'</span><span style='color: #BBBB00;'>~&gt;</span><span> </span><span style='color: #BBBB00;'>&lt;</span><span style='color: #00BBBB;font-weight: bold;'>ec</span><span style='color: #00BBBB;'>'</span><span style='color: #00BBBB;font-weight: bold;'>g</span><span style='color: #00BBBB;'>'</span><span style='color: #BBBB00;'>&gt;</span><span></div><div class='input'><span class='fu'>phrase_info</span>(<span class='no'>p5</span>)</div><div class='output co'>#&gt; [1] "1 1 1"</div><div class='input'><span class='fu'>phrase_strings</span>(<span class='no'>p5</span>)</div><div class='output co'>#&gt; [1] "5 432 432"</div><div class='input'>
<span class='co'># If phrase decomposition works well, coercion is one to one</span>
<span class='no'>x2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>x</span>,
  <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='phrase.html'>p</a></span>(<span class='fu'>phrase_notes</span>(<span class='no'>x</span>), <span class='fu'>phrase_info</span>(<span class='no'>x</span>), <span class='fu'>phrase_strings</span>(<span class='no'>x</span>))
)
<span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span>(<span class='no'>x</span>, <span class='no'>x2</span>)</div><div class='output co'>#&gt; [1] TRUE</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://leonawicz.github.io/'>Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


